{"meta":{"title":"Lemon_Fruit","subtitle":"","description":"","author":"lemon","url":"https://lemon-fruit.github.io","root":"/"},"pages":[{"title":"æ‰€æœ‰åˆ†ç±»","date":"2021-03-03T08:01:55.133Z","updated":"2021-03-03T08:01:55.133Z","comments":true,"path":"categories/index.html","permalink":"https://lemon-fruit.github.io/categories/index.html","excerpt":"","text":""},{"title":"","date":"2021-03-03T08:00:59.874Z","updated":"2021-03-03T08:00:59.874Z","comments":true,"path":"about/index.html","permalink":"https://lemon-fruit.github.io/about/index.html","excerpt":"","text":"è¿™ä¸ªäººå¾ˆæ‡’ï¼Œä»€ä¹ˆéƒ½æ²¡ç•™ä¸‹.jpg"},{"title":"","date":"2021-03-03T08:04:49.667Z","updated":"2021-03-03T08:04:49.667Z","comments":true,"path":"friends/index.html","permalink":"https://lemon-fruit.github.io/friends/index.html","excerpt":"","text":""},{"title":"æ‰€æœ‰æ ‡ç­¾","date":"2021-03-03T08:02:33.808Z","updated":"2021-03-03T08:02:33.808Z","comments":true,"path":"tags/index.html","permalink":"https://lemon-fruit.github.io/tags/index.html","excerpt":"","text":""},{"title":"","date":"2021-03-03T08:03:26.389Z","updated":"2021-03-03T08:03:26.389Z","comments":true,"path":"mylist/index.html","permalink":"https://lemon-fruit.github.io/mylist/index.html","excerpt":"","text":""},{"title":"","date":"2021-03-03T08:12:39.086Z","updated":"2021-03-03T08:12:39.086Z","comments":true,"path":"404.html","permalink":"https://lemon-fruit.github.io/404.html","excerpt":"","text":"404 å¾ˆæŠ±æ­‰ï¼Œæ‚¨è®¿é—®çš„é¡µé¢ä¸å­˜åœ¨ å¯èƒ½æ˜¯è¾“å…¥åœ°å€æœ‰è¯¯æˆ–è¯¥åœ°å€å·²è¢«åˆ é™¤"}],"posts":[{"title":"ä¼˜ç‚«é¢ç»","slug":"ä¼˜ç‚«","date":"2021-04-16T02:18:16.000Z","updated":"2021-04-16T09:49:35.949Z","comments":true,"path":"2021/04/16/ä¼˜ç‚«/","link":"","permalink":"https://lemon-fruit.github.io/2021/04/16/%E4%BC%98%E7%82%AB/","excerpt":"","text":"è‡ªæˆ‘ä»‹ç»å·´æ‹‰å·´æ‹‰ ä»‹ç»ä¸€ä¸‹Javaå­¦äº†å•¥ç­”ï¼šä¸»è¦å­¦äº†ä¸€ä¸‹ é›†åˆ å’Œ çº¿ç¨‹ ä»‹ç»ä¸€ä¸‹é›†åˆä¸‹çš„ç±»ç­”ï¼šCollectionä¸‹çš„ List ï¼ŒSetï¼ŒMap, Queue æ³¨æ„ï¼šJava é›†åˆæ¡†æ¶ä¸»è¦åŒ…æ‹¬ä¸¤ç§ç±»å‹çš„å®¹å™¨ï¼Œä¸€ç§æ˜¯é›†åˆï¼ˆCollectionï¼‰ï¼Œå­˜å‚¨ä¸€ä¸ªå…ƒç´ é›†åˆï¼Œå¦ä¸€ç§æ˜¯å›¾ï¼ˆMapï¼‰ï¼Œå­˜å‚¨é”®/å€¼å¯¹æ˜ å°„ã€‚Collection æ¥å£åˆæœ‰ 3 ç§å­ç±»å‹ï¼ŒListã€Set å’Œ Queueï¼Œå†ä¸‹é¢æ˜¯ä¸€äº›æŠ½è±¡ç±»ï¼Œæœ€åæ˜¯å…·ä½“å®ç°ç±»ï¼Œå¸¸ç”¨çš„æœ‰ArrayListã€LinkedListã€HashSetã€LinkedHashSetã€HashMapã€LinkedHashMap ç­‰ç­‰ã€‚ä¸‹å›¾ğŸ‘‡ï¼š Liståˆå§‹åŒ–å¤§å°ï¼Œä»¥åŠæ€ä¹ˆæ‰©å®¹ç­”ï¼š10ï¼Œ1.5 ArrayListæ‰©å®¹æš‚å­˜ å¦‚ä½•éå†ä¸€ä¸ªListç­”ï¼šä½¿ç”¨foreachã€‚ åº”è¯¥è¿˜æœ‰__Iteratorè¿­ä»£å™¨ï¼Œå°†é“¾è¡¨å˜ä¸ºæ•°ç»„éå†__ 123456789101112131415161718192021222324252627282930import java.util.*; public class Test&#123; public static void main(String[] args) &#123; List&lt;String&gt; list=new ArrayList&lt;String&gt;(); list.add(&quot;Hello&quot;); list.add(&quot;World&quot;); list.add(&quot;HAHAHAHA&quot;); //ç¬¬ä¸€ç§éå†æ–¹æ³•ä½¿ç”¨ For-Each éå† List for (String str : list) &#123; //ä¹Ÿå¯ä»¥æ”¹å†™ for(int i=0;i&lt;list.size();i++) è¿™ç§å½¢å¼ System.out.println(str); &#125; //ç¬¬äºŒç§éå†ï¼ŒæŠŠé“¾è¡¨å˜ä¸ºæ•°ç»„ç›¸å…³çš„å†…å®¹è¿›è¡Œéå† String[] strArray=new String[list.size()]; list.toArray(strArray); for(int i=0;i&lt;strArray.length;i++) //è¿™é‡Œä¹Ÿå¯ä»¥æ”¹å†™ä¸º for(String str:strArray) è¿™ç§å½¢å¼ &#123; System.out.println(strArray[i]); &#125; //ç¬¬ä¸‰ç§éå† ä½¿ç”¨è¿­ä»£å™¨è¿›è¡Œç›¸å…³éå† Iterator&lt;String&gt; ite=list.iterator(); while(ite.hasNext())//åˆ¤æ–­ä¸‹ä¸€ä¸ªå…ƒç´ ä¹‹åæœ‰å€¼ &#123; System.out.println(ite.next()); &#125; &#125;&#125; æ‰©å±•ï¼šå¦‚ä½•éå†Map123456789101112131415161718192021222324252627282930313233343536import java.util.*; public class Test&#123; public static void main(String[] args) &#123; Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;(); map.put(&quot;1&quot;, &quot;value1&quot;); map.put(&quot;2&quot;, &quot;value2&quot;); map.put(&quot;3&quot;, &quot;value3&quot;); //ç¬¬ä¸€ç§ï¼šæ™®éä½¿ç”¨ï¼ŒäºŒæ¬¡å–å€¼ System.out.println(&quot;é€šè¿‡Map.keySetéå†keyå’Œvalueï¼š&quot;); for (String key : map.keySet()) &#123; System.out.println(&quot;key= &quot;+ key + &quot; and value= &quot; + map.get(key)); &#125; //ç¬¬äºŒç§ System.out.println(&quot;é€šè¿‡Map.entrySetä½¿ç”¨iteratoréå†keyå’Œvalueï¼š&quot;); Iterator&lt;Map.Entry&lt;String, String&gt;&gt; it = map.entrySet().iterator(); while (it.hasNext()) &#123; Map.Entry&lt;String, String&gt; entry = it.next(); System.out.println(&quot;key= &quot; + entry.getKey() + &quot; and value= &quot; + entry.getValue()); &#125; //ç¬¬ä¸‰ç§ï¼šæ¨èï¼Œå°¤å…¶æ˜¯å®¹é‡å¤§æ—¶ System.out.println(&quot;é€šè¿‡Map.entrySetéå†keyå’Œvalue&quot;); for (Map.Entry&lt;String, String&gt; entry : map.entrySet()) &#123; System.out.println(&quot;key= &quot; + entry.getKey() + &quot; and value= &quot; + entry.getValue()); &#125; //ç¬¬å››ç§ System.out.println(&quot;é€šè¿‡Map.values()éå†æ‰€æœ‰çš„valueï¼Œä½†ä¸èƒ½éå†key&quot;); for (String v : map.values()) &#123; System.out.println(&quot;value= &quot; + v); &#125; &#125;&#125; staticä¿®é¥°çš„æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿstatic å…³é”®å­—ä¸»è¦æœ‰ä»¥ä¸‹å››ç§ä½¿ç”¨åœºæ™¯ï¼š ä¿®é¥°æˆå‘˜å˜é‡å’Œæˆå‘˜æ–¹æ³•: è¢« static ä¿®é¥°çš„æˆå‘˜å±äºç±»ï¼Œä¸å±äºå•ä¸ªè¿™ä¸ªç±»çš„æŸä¸ªå¯¹è±¡ï¼Œè¢«ç±»ä¸­æ‰€æœ‰å¯¹è±¡å…±äº«ï¼Œå¯ä»¥å¹¶ä¸”å»ºè®®é€šè¿‡ç±»åè°ƒç”¨ã€‚è¢«static å£°æ˜çš„æˆå‘˜å˜é‡å±äºé™æ€æˆå‘˜å˜é‡ï¼Œé™æ€å˜é‡ å­˜æ”¾åœ¨ Java å†…å­˜åŒºåŸŸçš„æ–¹æ³•åŒºã€‚è°ƒç”¨æ ¼å¼ï¼šç±»å.é™æ€å˜é‡å ç±»å.é™æ€æ–¹æ³•å() é™æ€ä»£ç å—: é™æ€ä»£ç å—å®šä¹‰åœ¨ç±»ä¸­æ–¹æ³•å¤–, é™æ€ä»£ç å—åœ¨éé™æ€ä»£ç å—ä¹‹å‰æ‰§è¡Œ(é™æ€ä»£ç å—â€”&gt;éé™æ€ä»£ç å—â€”&gt;æ„é€ æ–¹æ³•)ã€‚ è¯¥ç±»ä¸ç®¡åˆ›å»ºå¤šå°‘å¯¹è±¡ï¼Œé™æ€ä»£ç å—åªæ‰§è¡Œä¸€æ¬¡. é™æ€å†…éƒ¨ç±»ï¼ˆstaticä¿®é¥°ç±»çš„è¯åªèƒ½ä¿®é¥°å†…éƒ¨ç±»ï¼‰ï¼š é™æ€å†…éƒ¨ç±»ä¸éé™æ€å†…éƒ¨ç±»ä¹‹é—´å­˜åœ¨ä¸€ä¸ªæœ€å¤§çš„åŒºåˆ«: éé™æ€å†…éƒ¨ç±»åœ¨ç¼–è¯‘å®Œæˆä¹‹åä¼šéšå«åœ°ä¿å­˜ç€ä¸€ä¸ªå¼•ç”¨ï¼Œè¯¥å¼•ç”¨æ˜¯æŒ‡å‘åˆ›å»ºå®ƒçš„å¤–å›´ç±»ï¼Œä½†æ˜¯é™æ€å†…éƒ¨ç±»å´æ²¡æœ‰ã€‚æ²¡æœ‰è¿™ä¸ªå¼•ç”¨å°±æ„å‘³ç€ï¼š1. å®ƒçš„åˆ›å»ºæ˜¯ä¸éœ€è¦ä¾èµ–å¤–å›´ç±»çš„åˆ›å»ºã€‚2. å®ƒä¸èƒ½ä½¿ç”¨ä»»ä½•å¤–å›´ç±»çš„éstaticæˆå‘˜å˜é‡å’Œæ–¹æ³•ã€‚ é™æ€å¯¼åŒ…(ç”¨æ¥å¯¼å…¥ç±»ä¸­çš„é™æ€èµ„æºï¼Œ1.5ä¹‹åçš„æ–°ç‰¹æ€§): æ ¼å¼ä¸ºï¼šimport static è¿™ä¸¤ä¸ªå…³é”®å­—è¿ç”¨å¯ä»¥æŒ‡å®šå¯¼å…¥æŸä¸ªç±»ä¸­çš„æŒ‡å®šé™æ€èµ„æºï¼Œå¹¶ä¸”ä¸éœ€è¦ä½¿ç”¨ç±»åè°ƒç”¨ç±»ä¸­é™æ€æˆå‘˜ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ç±»ä¸­é™æ€æˆå‘˜å˜é‡å’Œæˆå‘˜æ–¹æ³•ã€‚ Stringå¯ä»¥è¢«ç»§æ‰¿å—ï¼Ÿç­”ï¼šä¸èƒ½ï¼Œå› ä¸ºStringè¢«finalä¿®é¥°ï¼Œç„¶åç­”äº†ä¸€éƒ¨åˆ†å®‰å…¨ç›¸å…³é—®é¢˜ï¼ˆSQLæ³¨å…¥ï¼‰ æ‰©å±•ï¼š åœ¨å¤šçº¿ç¨‹ä¸­ï¼Œåªæœ‰ä¸å˜çš„å¯¹è±¡å’Œå€¼æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¯ä»¥åœ¨å¤šä¸ªçº¿ç¨‹ä¸­å…±äº«æ•°æ®ã€‚ç”±äº String å¤©ç„¶ çš„ä¸å¯å˜ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹â€ä¿®æ”¹â€œäº†å­—ç¬¦ä¸²çš„å€¼ï¼Œåªä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²å¯¹è±¡ï¼Œä¸ä¼šå¯¹å…¶ä»–çº¿ç¨‹çš„è®¿ é—®äº§ç”Ÿå‰¯ä½œç”¨ï¼Œè®¿é—®çš„éƒ½æ˜¯åŒæ ·çš„å­—ç¬¦ä¸²æ•°æ®ï¼Œä¸éœ€è¦ä»»ä½•åŒæ­¥æ“ä½œã€‚ å­—ç¬¦ä¸²ä½œä¸ºåŸºç¡€çš„æ•°æ®ç»“æ„ï¼Œå¤§é‡åœ°åº”ç”¨åœ¨ä¸€äº›é›†åˆå®¹å™¨ä¹‹ä¸­ï¼Œå°¤å…¶æ˜¯ä¸€äº›æ•£åˆ—é›†åˆï¼Œåœ¨æ•£åˆ—é›†åˆ ä¸­ï¼Œå­˜æ”¾å…ƒç´ éƒ½è¦æ ¹æ®å¯¹è±¡çš„ hashCode() æ–¹æ³•æ¥ç¡®å®šå…ƒç´ çš„ä½ç½®ã€‚ç”±äºå­—ç¬¦ä¸² hashcode å±æ€§ ä¸ä¼šå˜æ›´ï¼Œä¿è¯äº†å”¯ä¸€æ€§ï¼Œä½¿å¾—ç±»ä¼¼ HashMapï¼ŒHashSet ç­‰å®¹å™¨æ‰èƒ½å®ç°ç›¸åº”çš„ç¼“å­˜åŠŸèƒ½ã€‚ç”±äº String çš„ä¸å¯å˜ï¼Œé¿å…é‡å¤è®¡ç®— hashcode ï¼Œåªè¦ä½¿ç”¨ç¼“å­˜çš„ hashcode å³å¯ï¼Œè¿™æ ·ä¸€æ¥å¤§å¤§æ é«˜äº†åœ¨æ•£åˆ—é›†åˆä¸­ä½¿ç”¨ String å¯¹è±¡çš„æ€§èƒ½ã€‚ å½“å­—ç¬¦ä¸²ä¸å¯å˜æ—¶ï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± æ‰æœ‰æ„ä¹‰ã€‚å­—ç¬¦ä¸²å¸¸é‡æ± çš„å‡ºç°ï¼Œå¯ä»¥å‡å°‘åˆ›å»ºç›¸åŒå­—é¢é‡çš„å­— ç¬¦ä¸²ï¼Œè®©ä¸åŒçš„å¼•ç”¨æŒ‡å‘æ± ä¸­åŒä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¸ºè¿è¡Œæ—¶èŠ‚çº¦å¾ˆå¤šçš„å †å†…å­˜ã€‚è‹¥å­—ç¬¦ä¸²å¯å˜ï¼Œå­—ç¬¦ä¸² å¸¸é‡æ± å¤±å»æ„ä¹‰ï¼ŒåŸºäºå¸¸é‡æ± çš„ String.intern() æ–¹æ³•ä¹Ÿå¤±æ•ˆï¼Œæ¯æ¬¡åˆ›å»ºæ–°çš„å­—ç¬¦ä¸²å°†åœ¨å †å†… å¼€è¾Ÿå‡ºæ–°çš„ç©ºé—´ï¼Œå æ®æ›´å¤šçš„å†…å­˜ã€‚ æ€ä¹ˆåˆ›å»ºçº¿ç¨‹æ± ä»¥åŠä½œç”¨ç­”ï¼š å¯ä»¥ä½¿ç”¨é˜¿é‡Œå·´å·´çš„druidï¼ˆè„‘å­çŠ¯æŠ½ï¼‰ çº¿ç¨‹æ±  æ¶‰åŠåˆ°çš„ç±»æ¯”å¦‚ï¼šExecutorã€Executorsã€ThreadPoolExectorã€AbstractExecutorServiceã€ Futureã€Callableã€ScheduledThreadPoolExecutorç­‰ç­‰ã€‚ ç³»ç»Ÿå¯åŠ¨ä¸€ä¸ªæ–°çº¿ç¨‹çš„æˆæœ¬æ˜¯æ¯”è¾ƒé«˜çš„ï¼Œå› ä¸ºå®ƒæ¶‰åŠä¸æ“ä½œç³»ç»Ÿäº¤äº’ã€‚åœ¨è¿™ç§æƒ…å½¢ä¸‹ï¼Œä½¿ç”¨çº¿ç¨‹æ± å¯ä»¥ å¾ˆå¥½åœ°æé«˜æ€§èƒ½ï¼Œå°¤å…¶æ˜¯å½“ç¨‹åºä¸­éœ€è¦åˆ›å»ºå¤§é‡ç”Ÿå­˜æœŸå¾ˆçŸ­æš‚çš„çº¿ç¨‹æ—¶ï¼Œæ›´åº”è¯¥è€ƒè™‘ä½¿ç”¨çº¿ç¨‹æ± ã€‚ä¸æ•°æ®åº“è¿æ¥æ± ç±»ä¼¼çš„æ˜¯ï¼Œçº¿ç¨‹æ± åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶å³åˆ›å»ºå¤§é‡ç©ºé—²çš„çº¿ç¨‹ï¼Œç¨‹åºå°†ä¸€ä¸ªRunnableå¯¹è±¡æˆ– Callableå¯¹è±¡ä¼ ç»™çº¿ç¨‹æ± ï¼Œçº¿ç¨‹æ± å°±ä¼šå¯åŠ¨ä¸€ä¸ªç©ºé—²çš„çº¿ç¨‹æ¥æ‰§è¡Œå®ƒä»¬çš„run()æˆ–call()æ–¹æ³•ï¼Œå½“run()æˆ–call()æ–¹æ³•æ‰§è¡Œç»“æŸåï¼Œè¯¥çº¿ç¨‹å¹¶ä¸ä¼šæ­»äº¡ï¼Œè€Œæ˜¯å†æ¬¡è¿”å›çº¿ç¨‹æ± ä¸­æˆä¸ºç©ºé—²çŠ¶æ€ï¼Œç­‰å¾…æ‰§è¡Œä¸‹ä¸€ä¸ª Runnableå¯¹è±¡çš„run()æˆ–call()æ–¹æ³•ã€‚ä»Java 5å¼€å§‹ï¼ŒJavaå†…å»ºæ”¯æŒçº¿ç¨‹æ± ã€‚æ–°å¢äº†ä¸€ä¸ªExecutorså·¥å‚ç±»æ¥äº§ç”Ÿçº¿ç¨‹æ± ï¼Œè¯¥å·¥å‚ç±»åŒ…å« å¦‚ä¸‹å‡ ä¸ªé™æ€å·¥å‚æ–¹æ³•æ¥åˆ›å»ºçº¿ç¨‹æ± ã€‚åˆ›å»ºå‡ºæ¥çš„çº¿ç¨‹æ± ï¼Œéƒ½æ˜¯é€šè¿‡ThreadPoolExecutorç±»æ¥å®ç°çš„ã€‚ newCachedThreadPool()ï¼šåˆ›å»ºä¸€ä¸ªå…·æœ‰ç¼“å­˜åŠŸèƒ½çš„çº¿ç¨‹æ± ï¼Œç³»ç»Ÿæ ¹æ®éœ€è¦åˆ›å»ºçº¿ç¨‹ï¼Œè¿™äº›çº¿ç¨‹ å°†ä¼šè¢«ç¼“å­˜åœ¨çº¿ç¨‹æ± ä¸­ã€‚ newFixedThreadPool(int nThreads)ï¼šåˆ›å»ºä¸€ä¸ªå¯é‡ç”¨çš„ã€å…·æœ‰å›ºå®šçº¿ç¨‹æ•°çš„çº¿ç¨‹æ± ã€‚ newSingleThreadExecutor()ï¼šåˆ›å»ºä¸€ä¸ªåªæœ‰å•çº¿ç¨‹çš„çº¿ç¨‹æ± ï¼Œå®ƒç›¸å½“äºè°ƒç”¨newFixedThread Pool()æ–¹æ³•æ—¶ä¼ å…¥å‚æ•°ä¸º1ã€‚ newScheduledThreadPool(int corePoolSize)ï¼šåˆ›å»ºå…·æœ‰æŒ‡å®šçº¿ç¨‹æ•°çš„çº¿ç¨‹æ± ï¼Œå®ƒå¯ä»¥åœ¨æŒ‡å®šå»¶ è¿Ÿåæ‰§è¡Œçº¿ç¨‹ä»»åŠ¡ã€‚corePoolSizeæŒ‡æ± ä¸­æ‰€ä¿å­˜çš„çº¿ç¨‹æ•°ï¼Œå³ä½¿çº¿ç¨‹æ˜¯ç©ºé—²çš„ä¹Ÿè¢«ä¿å­˜åœ¨çº¿ç¨‹æ±  å†…ã€‚ newSingleThreadScheduledExecutor()ï¼šåˆ›å»ºåªæœ‰ä¸€ä¸ªçº¿ç¨‹çš„çº¿ç¨‹æ± ï¼Œå®ƒå¯ä»¥åœ¨æŒ‡å®šå»¶è¿Ÿåæ‰§è¡Œ çº¿ç¨‹ä»»åŠ¡ã€‚ ExecutorService newWorkStealingPool(int parallelism)ï¼šåˆ›å»ºæŒæœ‰è¶³å¤Ÿçš„çº¿ç¨‹çš„çº¿ç¨‹æ± æ¥æ”¯æŒ ç»™å®šçš„å¹¶è¡Œçº§åˆ«ï¼Œè¯¥æ–¹æ³•è¿˜ä¼šä½¿ç”¨å¤šä¸ªé˜Ÿåˆ—æ¥å‡å°‘ç«äº‰ã€‚ ExecutorService newWorkStealingPool()ï¼šè¯¥æ–¹æ³•æ˜¯å‰ä¸€ä¸ªæ–¹æ³•çš„ç®€åŒ–ç‰ˆæœ¬ã€‚å¦‚æœå½“å‰æœºå™¨æœ‰4ä¸ª CPUï¼Œåˆ™ç›®æ ‡å¹¶è¡Œçº§åˆ«è¢«è®¾ç½®ä¸º4ï¼Œä¹Ÿå°±æ˜¯ç›¸å½“äºä¸ºå‰ä¸€ä¸ªæ–¹æ³•ä¼ å…¥4ä½œä¸ºå‚æ•°ã€‚ å¯åŠ¨çº¿ç¨‹æ—¶å¯ä»¥ç›´æ¥è°ƒç”¨runæ–¹æ³•å—ï¼Ÿä¸startæ–¹æ³•æœ‰ä½•ä¸åŒï¼Ÿç­”ï¼šä¸èƒ½ï¼Œå¿˜äº† å‚è€ƒé“¾æ¥ run()æ–¹æ³•è¢«ç§°ä¸ºçº¿ç¨‹æ‰§è¡Œä½“ï¼Œå®ƒçš„æ–¹æ³•ä½“ä»£è¡¨äº†çº¿ç¨‹éœ€è¦å®Œæˆçš„ä»»åŠ¡ï¼Œè€Œstart()æ–¹æ³•ç”¨æ¥å¯åŠ¨çº¿ç¨‹ã€‚ è°ƒç”¨start()æ–¹æ³•å¯åŠ¨çº¿ç¨‹æ—¶ï¼Œç³»ç»Ÿä¼šæŠŠè¯¥run()æ–¹æ³•å½“æˆçº¿ç¨‹æ‰§è¡Œä½“æ¥å¤„ç†ã€‚ ä½†å¦‚æœç›´æ¥è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„ run()æ–¹æ³•ï¼Œåˆ™run()æ–¹æ³•ç«‹å³å°±ä¼šè¢«æ‰§è¡Œï¼Œè€Œä¸”åœ¨run()æ–¹æ³•è¿”å›ä¹‹å‰å…¶ä»–çº¿ç¨‹æ— æ³•å¹¶å‘æ‰§è¡Œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœç›´æ¥è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„run()æ–¹æ³•ï¼Œç³»ç»ŸæŠŠçº¿ç¨‹å¯¹è±¡å½“æˆä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œè€Œrun()æ–¹æ³•ä¹Ÿæ˜¯ä¸€ä¸ªæ™®é€šæ–¹æ³•ï¼Œè€Œä¸æ˜¯çº¿ç¨‹æ‰§è¡Œä½“ æ— åé—®ç¯èŠ‚ï¼Œè¿˜æ˜¯è‡ªå·±å¤ªèœäº†æ€»ç»“JavaåŸºç¡€çŸ¥è¯†æŒæ¡ä¸ç‰¢ï¼Œçº¿ç¨‹éœ€è¦å³ä½¿å¥½å¥½å¤ä¹ ï¼Œç»§ç»­ç ”è¯»ã€ŠJavaå¹¶å‘ç¼–ç¨‹ä¹‹ç¾ã€‹ï¼Œé›†åˆéƒ¨åˆ†éœ€è¦è¿›è¡ŒçŸ¥è¯†è¡¥å……ï¼Œå¼€å§‹é‡æ–°é˜…è¯»ã€ŠJavaæ ¸å¿ƒæŠ€æœ¯å·1ã€‹ã€‚éœ€æ·±å…¥JVMï¼Œæ“ä½œç³»ç»Ÿï¼Œè®¡ç®—æœºç½‘ç»œã€‚","categories":[],"tags":[{"name":"é¢ç»","slug":"é¢ç»","permalink":"https://lemon-fruit.github.io/tags/%E9%9D%A2%E7%BB%8F/"}],"author":"Lemon"},{"title":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","date":"2021-04-15T08:05:00.000Z","updated":"2021-04-19T07:30:52.813Z","comments":true,"path":"2021/04/15/è®¡ç®—æœºç½‘ç»œ/","link":"","permalink":"https://lemon-fruit.github.io/2021/04/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/","excerpt":"","text":"ä¼ è¾“å±‚ä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šå»ºç«‹è¿æ¥æ—¶ï¼Œå®¢æˆ·ç«¯å‘é€synåŒ…ï¼ˆsyn = xï¼‰åˆ°æœåŠ¡å™¨ï¼Œå¹¶è¿›å…¥ SYN-SENTï¼ˆåŒæ­¥å·²å‘é€ï¼‰ çŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡å™¨ç¡®è®¤ï¼›SYNï¼šåŒæ­¥åºåˆ—ç¼–å·(Synchronize Sequence Numbers)ã€‚ ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡å™¨æ”¶åˆ°synåŒ…ï¼Œå¿…é¡»ç¡®è®¤å®¢æˆ·çš„SYN(ack = x + 1)ï¼ŒåŒæ—¶è‡ªå·±ä¹Ÿå‘é€ä¸€ä¸ªSYNåŒ… (syn = y)ï¼Œå³SYN + ACKåŒ…ï¼Œæ­¤æ—¶æœåŠ¡å™¨è¿›å…¥ SYN-RECVï¼ˆåŒæ­¥æ”¶åˆ°ï¼‰ çŠ¶æ€ ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„SYN + ACKåŒ…ï¼Œå‘æœåŠ¡å™¨å‘é€ç¡®è®¤åŒ…ACK(ack = y + 1)ï¼Œæ­¤åŒ…å‘é€å®Œæ¯•ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨è¿›å…¥ ESTABLISHEDï¼ˆå·²å»ºç«‹è¿æ¥ï¼‰ çŠ¶æ€ï¼Œå®Œæˆä¸‰æ¬¡æ¡æ‰‹ã€‚ TCPå»ºç«‹è¿æ¥å¯ä»¥ä¸¤æ¬¡æ¡æ‰‹å—ï¼Ÿä¸ºä»€ä¹ˆ?ä¸å¯ä»¥ã€‚æœ‰ä¸¤ä¸ªåŸå› ï¼š å¯èƒ½ä¼šå‡ºç°å·²å¤±æ•ˆçš„è¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µåˆä¼ åˆ°äº†æœåŠ¡å™¨ç«¯ã€‚ client å‘å‡ºçš„ç¬¬ä¸€ä¸ªè¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µå¹¶æ²¡æœ‰ä¸¢å¤±ï¼Œè€Œæ˜¯åœ¨æŸä¸ªç½‘ç»œç»“ç‚¹é•¿æ—¶é—´çš„æ»ç•™äº†ï¼Œä»¥è‡´å»¶è¯¯åˆ°è¿æ¥é‡Šæ”¾ä»¥åçš„æŸä¸ªæ—¶é—´æ‰åˆ°è¾¾ serverã€‚æœ¬æ¥è¿™æ˜¯ä¸€ä¸ªæ—©å·²å¤±æ•ˆçš„æŠ¥æ–‡æ®µã€‚ä½† server æ”¶åˆ°æ­¤å¤±æ•ˆçš„è¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µåï¼Œå°±è¯¯è®¤ä¸ºæ˜¯ client å†æ¬¡å‘å‡ºçš„ä¸€ä¸ªæ–°çš„è¿æ¥è¯·æ±‚ã€‚äºæ˜¯å°±å‘ client å‘å‡ºç¡®è®¤æŠ¥æ–‡æ®µï¼ŒåŒæ„å»ºç«‹è¿æ¥ã€‚å‡è®¾ä¸é‡‡ç”¨ â€œä¸‰æ¬¡æ¡æ‰‹â€ï¼Œé‚£ä¹ˆåªè¦ server å‘å‡ºç¡®è®¤ï¼Œæ–°çš„è¿æ¥å°±å»ºç«‹äº†ã€‚ç”±äºç°åœ¨ client å¹¶æ²¡æœ‰å‘å‡ºå»ºç«‹è¿æ¥çš„è¯·æ±‚ï¼Œå› æ­¤ä¸ä¼šç†ç¬ server çš„ç¡®è®¤ï¼Œä¹Ÿä¸ä¼šå‘ server å‘é€æ•°æ®ã€‚ä½† server å´ä»¥ä¸ºæ–°çš„è¿è¾“è¿æ¥å·²ç»å»ºç«‹ï¼Œå¹¶ä¸€ç›´ç­‰å¾… client å‘æ¥æ•°æ®ã€‚è¿™æ ·ï¼Œserver çš„å¾ˆå¤šèµ„æºå°±ç™½ç™½æµªè´¹æ‰äº†ã€‚é‡‡ç”¨ â€œä¸‰æ¬¡æ¡æ‰‹â€ çš„åŠæ³•å¯ä»¥é˜²æ­¢ä¸Šè¿°ç°è±¡å‘ç”Ÿã€‚ä¾‹å¦‚åˆšæ‰é‚£ç§æƒ…å†µï¼Œclient ä¸ä¼šå‘ server çš„ç¡®è®¤å‘å‡ºç¡®è®¤ã€‚server ç”±äºæ”¶ä¸åˆ°ç¡®è®¤ï¼Œå°±çŸ¥é“ client å¹¶æ²¡æœ‰è¦æ±‚å»ºç«‹è¿æ¥ã€‚ ä¸¤æ¬¡æ¡æ‰‹æ— æ³•ä¿è¯Clientæ­£ç¡®æ¥æ”¶ç¬¬äºŒæ¬¡æ¡æ‰‹çš„æŠ¥æ–‡ï¼ˆServeræ— æ³•ç¡®è®¤Clientæ˜¯å¦æ”¶åˆ°ï¼‰ï¼Œä¹Ÿæ— æ³•ä¿è¯Clientå’ŒServerä¹‹é—´æˆåŠŸäº’æ¢åˆå§‹åºåˆ—å·ã€‚ å¯ä»¥é‡‡ç”¨å››æ¬¡æ¡æ‰‹å—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿå¯ä»¥ã€‚ä½†ä¼šé™ä½ä¼ è¾“æ•ˆç‡ å››æ¬¡æ¡æ‰‹ï¼šç¬¬äºŒæ¬¡æ¡æ‰‹æ—¶ï¼ŒServeråªå‘é€ACKå’Œacknowledge numberï¼›è€ŒServerçš„SYNå’Œåˆå§‹åºåˆ—å·åœ¨ç¬¬ä¸‰æ¬¡æ¡æ‰‹æ—¶å‘é€ï¼›åŸæ¥åè®®ä¸­çš„ç¬¬ä¸‰æ¬¡æ¡æ‰‹å˜ä¸ºç¬¬å››æ¬¡æ¡æ‰‹ã€‚å››æ¬¡æ¡æ‰‹ä¸­çš„äºŒã€ä¸‰å¯ä»¥åˆå¹¶ã€‚ ç¬¬ä¸‰æ¬¡æ¡æ‰‹ä¸­ï¼Œå¦‚æœå®¢æˆ·ç«¯çš„ACKæœªé€è¾¾æœåŠ¡å™¨ä¼šæ€æ ·ï¼ŸæœåŠ¡ç«¯ï¼šç”±äºServeræ²¡æœ‰æ”¶åˆ°ACKç¡®è®¤ï¼Œå› æ­¤ä¼šé‡å‘ä¹‹å‰çš„SYN + ACKï¼ˆé»˜è®¤é‡å‘äº”æ¬¡ï¼Œä¹‹åè‡ªåŠ¨å…³é—­è¿æ¥è¿›å…¥CLOSEDçŠ¶æ€ï¼‰ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°åä¼šé‡æ–°ä¼ ACKç»™æœåŠ¡ç«¯ å®¢æˆ·ç«¯ï¼š åœ¨æœåŠ¡ç«¯è¿›è¡Œè¶…æ—¶é‡å‘çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€æ•°æ®ï¼Œæ•°æ®å¤´éƒ¨çš„ACKæ˜¯ä¸º1çš„ï¼Œæ‰€ä»¥æœåŠ¡å™¨æ”¶åˆ°æ•°æ®ä¹‹åä¼šè¯»å–ACK numberï¼Œè¿›å…¥establishçŠ¶æ€ åœ¨æœåŠ¡ç«¯è¿›å…¥CLOSEDçŠ¶æ€ä¹‹åï¼Œå¦‚æœå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€æ•°æ®ï¼ŒæœåŠ¡å™¨ä¼šä»¥RSTåŒ…åº”ç­” å¦‚æœå·²ç»å»ºç«‹è¿æ¥ï¼Œä½†å®¢æˆ·ç«¯å‡ºç°äº†æ•…éšœæ€ä¹ˆåŠ?æœåŠ¡å™¨æ¯æ”¶åˆ°ä¸€æ¬¡å®¢æˆ·ç«¯çš„è¯·æ±‚åï¼Œéƒ½ä¼šé‡æ–°å¤ä½ä¸€ä¸ªè®¡æ—¶å™¨ï¼Œæ—¶é—´é€šå¸¸æ˜¯è®¾ç½®ä¸º2å°æ—¶ï¼Œè‹¥ä¸¤å°æ—¶è¿˜æ²¡æœ‰æ”¶åˆ°å®¢æˆ·ç«¯çš„ä»»ä½•æ•°æ®ï¼ŒæœåŠ¡å™¨å°±ä¼šå‘é€ä¸€ä¸ªæ¢æµ‹æŠ¥æ–‡æ®µï¼Œä»¥åæ¯éš”75ç§’é’Ÿå‘é€ä¸€æ¬¡ã€‚è‹¥ä¸€è¿å‘é€10ä¸ªæ¢æµ‹æŠ¥æ–‡ä»ç„¶æ²¡ååº”ï¼ŒæœåŠ¡å™¨å°±è®¤ä¸ºå®¢æˆ·ç«¯å‡ºäº†æ•…éšœï¼Œæ¥ç€å°±å…³é—­è¿æ¥ ä»€ä¹ˆæ˜¯å››æ¬¡æŒ¥æ‰‹ ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼šå®¢æˆ·ç«¯å°†FINç½®ä¸º1ï¼Œå‘é€ä¸€ä¸ªåºåˆ—å·seqç»™æœåŠ¡ç«¯ï¼›è¿›å…¥FIN-WAIT-1ï¼ˆç»ˆæ­¢ç­‰å¾… 1ï¼‰çŠ¶æ€ï¼› ç¬¬äºŒæ¬¡æŒ¥æ‰‹ï¼šæœåŠ¡ç«¯æ”¶åˆ°FINä¹‹åï¼Œå‘é€ä¸€ä¸ªACK=1ï¼Œacknowledge number=æ”¶åˆ°çš„åºåˆ—å·+1ï¼›è¿›å…¥CLOSE-WAITï¼ˆå…³é—­ç­‰å¾…ï¼‰çŠ¶æ€ã€‚æ­¤æ—¶TCPè¿æ¥å¤„äº**åŠå…³é—­(half-close)**çŠ¶æ€ï¼Œå®¢æˆ·ç«¯å·²ç»æ²¡æœ‰è¦å‘é€çš„æ•°æ®äº†ï¼Œä½†ä»å¯ä»¥æ¥å—æœåŠ¡å™¨å‘æ¥çš„æ•°æ®ã€‚ ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ï¼šæœåŠ¡ç«¯å°†FINç½®1ï¼Œå‘é€ä¸€ä¸ªåºåˆ—å·ç»™å®¢æˆ·ç«¯ï¼Œ1å®¢æˆ·ç«¯ æ”¶åˆ°åè¿›å…¥FIN-WAIT-2ï¼ˆç»ˆæ­¢ç­‰å¾… 2ï¼‰ï¼ŒæœåŠ¡ç«¯ è¿›å…¥LAST-ACKï¼ˆæœ€åç¡®è®¤çŠ¶æ€ï¼‰çŠ¶æ€ï¼› ç¬¬å››æ¬¡æŒ¥æ‰‹ï¼šClientæ”¶åˆ°æœåŠ¡å™¨çš„FINåï¼Œè¿›å…¥TIME-WAITï¼ˆæ—¶é—´ç­‰å¾…ï¼‰çŠ¶æ€ï¼›æ¥ç€å°†ACKç½®1ï¼Œå‘é€ä¸€ä¸ªacknowledge number = åºåˆ—å· + 1 ç»™æœåŠ¡å™¨ï¼›æœåŠ¡å™¨æ”¶åˆ°åï¼Œç¡®è®¤acknowledge numberåï¼Œå˜ä¸ºCLOSEDçŠ¶æ€ï¼Œä¸å†å‘å®¢æˆ·ç«¯å‘é€æ•°æ®ã€‚å®¢æˆ·ç«¯ç­‰å¾…2 * MSLï¼ˆæŠ¥æ–‡æ®µæœ€é•¿å¯¿å‘½ï¼‰æ—¶é—´åï¼Œä¹Ÿè¿›å…¥CLOSEDçŠ¶æ€ã€‚å®Œæˆå››æ¬¡æŒ¥æ‰‹ ä¸ºä»€ä¹ˆä¸èƒ½æŠŠæœåŠ¡å™¨å‘é€çš„ACKå’ŒFINåˆå¹¶èµ·æ¥ï¼Œå˜æˆä¸‰æ¬¡æŒ¥æ‰‹ï¼ˆCLOSE-WAITçŠ¶æ€æ„ä¹‰æ˜¯ä»€ä¹ˆï¼‰ï¼Ÿå› ä¸ºæœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯æ–­å¼€è¿æ¥çš„è¯·æ±‚æ—¶ï¼Œå¯èƒ½è¿˜æœ‰ä¸€äº›æ•°æ®æ²¡æœ‰å‘å®Œï¼Œè¿™æ—¶å…ˆå›å¤ACKï¼Œè¡¨ç¤ºæ¥æ”¶åˆ°äº†æ–­å¼€çš„è¯·æ±‚ã€‚ç­‰åˆ°æ•°æ®å‘å®Œä¹‹åå†å‘FINï¼Œæ–­å¼€æœåŠ¡å™¨åˆ°å®¢æˆ·ç«¯çš„æ•°æ®ä¼ é€ å¦‚æœç¬¬äºŒæ¬¡æŒ¥æ‰‹æ—¶æœåŠ¡å™¨çš„ACKæ²¡æœ‰é€è¾¾æœåŠ¡ç«¯ä¼šæ€æ ·ï¼Ÿä¼šé‡æ–°å‘é€FINè¯·æ±‚ å®¢æˆ·ç«¯TIME-WAITçŠ¶æ€çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿç¬¬å››æ¬¡æŒ¥æ‰‹æ—¶ï¼Œå®¢æˆ·ç«¯å‘é€ç»™æœåŠ¡å™¨çš„ACKæœ‰å¯èƒ½ä¸¢å¤±ï¼ŒTIME_WAITçŠ¶æ€å°±æ˜¯ç”¨æ¥é‡å‘å¯èƒ½ä¸¢å¤±çš„ACKæŠ¥æ–‡ã€‚ å¦‚æœServeræ²¡æœ‰æ”¶åˆ°ACKï¼Œå°±ä¼šé‡å‘FINï¼Œå¦‚æœClientåœ¨2*MSLçš„æ—¶é—´å†…æ”¶åˆ°äº†FINï¼Œå°±ä¼šé‡æ–°å‘é€ACKå¹¶å†æ¬¡ç­‰å¾…2MSLï¼Œé˜²æ­¢Serveræ²¡æœ‰æ”¶åˆ°ACKè€Œä¸æ–­é‡å‘FINã€‚ MSL(Maximum Segment Lifetime)ï¼ŒæŒ‡ä¸€ä¸ªç‰‡æ®µåœ¨ç½‘ç»œä¸­æœ€å¤§çš„å­˜æ´»æ—¶é—´ï¼Œ2MSLå°±æ˜¯ä¸€ä¸ªå‘é€å’Œä¸€ä¸ªå›å¤æ‰€éœ€çš„æœ€å¤§æ—¶é—´ã€‚å¦‚æœç›´åˆ°2MSLï¼ŒClientéƒ½æ²¡æœ‰å†æ¬¡æ”¶åˆ°FINï¼Œé‚£ä¹ˆClientæ¨æ–­ACKå·²ç»è¢«æˆåŠŸæ¥æ”¶ï¼Œåˆ™ç»“æŸTCPè¿æ¥ã€‚ TCPå¦‚ä½•å®ç°æµé‡æ§åˆ¶ï¼Ÿ","categories":[],"tags":[{"name":"ç¬”è®°","slug":"ç¬”è®°","permalink":"https://lemon-fruit.github.io/tags/%E7%AC%94%E8%AE%B0/"}]},{"title":"Redis","slug":"Redis","date":"2021-04-11T13:25:31.710Z","updated":"2021-04-11T13:24:57.965Z","comments":true,"path":"2021/04/11/Redis/","link":"","permalink":"https://lemon-fruit.github.io/2021/04/11/Redis/","excerpt":"","text":"ç¼“å­˜ç©¿é€é—®é¢˜æè¿°ï¼š å®¢æˆ·ç«¯æŸ¥è¯¢æ ¹æœ¬ä¸å­˜åœ¨çš„æ•°æ®ï¼Œä½¿å¾—è¯·æ±‚ç›´è¾¾å­˜å‚¨å±‚ï¼Œå¯¼è‡´å…¶è´Ÿè½½è¿‡å¤§ï¼Œç”šè‡³å®•æœºã€‚ åŸå› å¯èƒ½æ˜¯ï¼šä¸šåŠ¡å±‚è¯¯å°†ç¼“å­˜å’Œåº“ä¸­çš„æ•°æ®åˆ é™¤äº†ï¼Œä¹Ÿå¯èƒ½æ˜¯æœ‰äººæ¶æ„æ”»å‡»ï¼Œä¸“é—¨è®¿é—®åº“ä¸­ä¸å­˜åœ¨çš„æ•° æ®ã€‚ è§£å†³æ–¹æ¡ˆï¼š ç¼“å­˜ç©ºå¯¹è±¡ï¼šå­˜å‚¨å±‚æœªå‘½ä¸­åï¼Œä»ç„¶å°†ç©ºå€¼å­˜å…¥ç¼“å­˜å±‚ï¼Œå®¢æˆ·ç«¯å†æ¬¡è®¿é—®æ•°æ®æ—¶ï¼Œç¼“å­˜å±‚ä¼šç›´æ¥è¿” å›ç©ºå€¼ã€‚ å¸ƒéš†è¿‡æ»¤å™¨ï¼šå°†æ•°æ®å­˜å…¥å¸ƒéš†è¿‡æ»¤å™¨ï¼Œè®¿é—®ç¼“å­˜ä¹‹å‰ä»¥è¿‡æ»¤å™¨æ‹¦æˆªï¼Œè‹¥è¯·æ±‚çš„æ•°æ®ä¸å­˜åœ¨åˆ™ç›´æ¥è¿” å›ç©ºå€¼ã€‚ ç¼“å­˜å‡»ç©¿é—®é¢˜æè¿°ï¼š ä¸€ä»½çƒ­ç‚¹æ•°æ®ï¼Œå®ƒçš„è®¿é—®é‡éå¸¸å¤§ã€‚åœ¨å…¶ç¼“å­˜å¤±æ•ˆçš„ç¬é—´ï¼Œå¤§é‡è¯·æ±‚ç›´è¾¾å­˜å‚¨å±‚ï¼Œå¯¼è‡´æœåŠ¡å´©æºƒã€‚ è§£å†³æ–¹æ¡ˆï¼š æ°¸ä¸è¿‡æœŸï¼šçƒ­ç‚¹æ•°æ®ä¸è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œæ‰€ä»¥ä¸ä¼šå‡ºç°ä¸Šè¿°é—®é¢˜ï¼Œè¿™æ˜¯â€œç‰©ç†â€ä¸Šçš„æ°¸ä¸è¿‡æœŸã€‚æˆ–è€…ä¸º æ¯ä¸ªæ•°æ®è®¾ç½®é€»è¾‘è¿‡æœŸæ—¶é—´ï¼Œå½“å‘ç°è¯¥æ•°æ®é€»è¾‘è¿‡æœŸæ—¶ï¼Œä½¿ç”¨å•ç‹¬çš„çº¿ç¨‹é‡å»ºç¼“å­˜ã€‚ åŠ äº’æ–¥é”ï¼šå¯¹æ•°æ®çš„è®¿é—®åŠ äº’æ–¥é”ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è®¿é—®è¯¥æ•°æ®æ—¶ï¼Œå…¶ä»–çº¿ç¨‹åªèƒ½ç­‰å¾…ã€‚è¿™ä¸ªçº¿ç¨‹è®¿é—® è¿‡åï¼Œç¼“å­˜ä¸­çš„æ•°æ®å°†è¢«é‡å»ºï¼Œå±Šæ—¶å…¶ä»–çº¿ç¨‹å°±å¯ä»¥ç›´æ¥ä»ç¼“å­˜ä¸­å–å€¼ã€‚ ç¼“å­˜é›ªå´©é—®é¢˜æè¿°ï¼š åœ¨æŸä¸€æ—¶åˆ»ï¼Œç¼“å­˜å±‚æ— æ³•ç»§ç»­æä¾›æœåŠ¡ï¼Œå¯¼è‡´æ‰€æœ‰çš„è¯·æ±‚ç›´è¾¾å­˜å‚¨å±‚ï¼Œé€ æˆæ•°æ®åº“å®•æœºã€‚å¯èƒ½æ˜¯ç¼“å­˜ä¸­ æœ‰å¤§é‡æ•°æ®åŒæ—¶è¿‡æœŸï¼Œä¹Ÿå¯èƒ½æ˜¯RedisèŠ‚ç‚¹å‘ç”Ÿæ•…éšœï¼Œå¯¼è‡´å¤§é‡è¯·æ±‚æ— æ³•å¾—åˆ°å¤„ç†ã€‚ è§£å†³æ–¹æ¡ˆï¼š é¿å…æ•°æ®åŒæ—¶è¿‡æœŸï¼šè®¾ç½®è¿‡æœŸæ—¶é—´æ—¶ï¼Œé™„åŠ ä¸€ä¸ªéšæœºæ•°ï¼Œé¿å…å¤§é‡çš„keyåŒæ—¶è¿‡æœŸã€‚ å¯ç”¨é™çº§å’Œç†”æ–­æªæ–½ï¼šåœ¨å‘ç”Ÿé›ªå´©æ—¶ï¼Œè‹¥åº”ç”¨è®¿é—®çš„ä¸æ˜¯æ ¸å¿ƒæ•°æ®ï¼Œåˆ™ç›´æ¥è¿”å›é¢„å®šä¹‰ä¿¡æ¯/ç©ºå€¼/ é”™è¯¯ä¿¡æ¯ã€‚æˆ–è€…åœ¨å‘ç”Ÿé›ªå´©æ—¶ï¼Œå¯¹äºè®¿é—®ç¼“å­˜æ¥å£çš„è¯·æ±‚ï¼Œå®¢æˆ·ç«¯å¹¶ä¸ä¼šæŠŠè¯·æ±‚å‘ç»™Redisï¼Œè€Œæ˜¯ ç›´æ¥è¿”å›ã€‚ æ„å»ºé«˜å¯ç”¨çš„RedisæœåŠ¡ï¼šé‡‡ç”¨å“¨å…µæˆ–é›†ç¾¤æ¨¡å¼ï¼Œéƒ¨ç½²å¤šä¸ªRediså®ä¾‹ï¼Œä¸ªåˆ«èŠ‚ç‚¹å®•æœºï¼Œä¾ç„¶å¯ä»¥ ä¿æŒæœåŠ¡çš„æ•´ä½“å¯ç”¨ã€‚","categories":[],"tags":[{"name":"ç¬”è®°","slug":"ç¬”è®°","permalink":"https://lemon-fruit.github.io/tags/%E7%AC%94%E8%AE%B0/"}]},{"title":"Mysql 45è®² è¯»ä¹¦ç¬”è®°","slug":"Mysql45è®²","date":"2021-04-10T01:49:58.000Z","updated":"2021-04-10T12:46:58.866Z","comments":true,"path":"2021/04/10/Mysql45è®²/","link":"","permalink":"https://lemon-fruit.github.io/2021/04/10/Mysql45%E8%AE%B2/","excerpt":"","text":"ä¸€æ¡SQLæŸ¥è¯¢è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„ è¿æ¥å™¨ è¿æ¥å™¨: è¿æ¥å™¨ä¸ å®¢æˆ·ç«¯å»ºç«‹è¿æ¥ï¼Œè·å–æƒé™ï¼Œç»´æŒå’Œç®¡ç†è¿æ¥ æ•°æ®åº“é‡Œé¢ï¼Œé•¿è¿æ¥æ˜¯æŒ‡è¿æ¥æˆåŠŸåï¼Œå¦‚æœå®¢æˆ·ç«¯æŒç»­æœ‰è¯·æ±‚ï¼Œåˆ™ä¸€ç›´ä½¿ç”¨åŒä¸€ä¸ªè¿æ¥ã€‚ çŸ­è¿æ¥åˆ™æ˜¯æŒ‡æ¯æ¬¡æ‰§è¡Œå®Œå¾ˆå°‘çš„å‡ æ¬¡æŸ¥è¯¢å°±æ–­å¼€è¿æ¥ï¼Œä¸‹æ¬¡æŸ¥è¯¢å†é‡æ–°å»ºç«‹ä¸€ä¸ªã€‚ å»ºç«‹è¿æ¥çš„è¿‡ç¨‹æ¯”è¾ƒå¤æ‚ï¼Œå»ºè®®å°½é‡å‡å°‘å»ºç«‹è¿æ¥çš„åŠ¨ä½œã€‚ä½†å¦‚æœé•¿è¿æ¥ç´¯ç§¯ä¸‹æ¥ï¼Œè‚¯å¯¼è‡´å†…å­˜å ç”¨è¿‡å¤§ è§£å†³æ–¹æ¡ˆï¼š å®šæœŸæ–­å¼€é•¿è¿æ¥ã€‚ä½¿ç”¨ä¸€æ®µæ—¶é—´ï¼Œæˆ–è€…ç¨‹åºé‡Œé¢åˆ¤æ–­æ‰§è¡Œè¿‡ä¸€ä¸ªå ç”¨å†…å­˜çš„å¤§æŸ¥è¯¢åï¼Œæ–­å¼€è¿æ¥ï¼Œä¹‹åè¦æŸ¥è¯¢å†é‡è¿ã€‚ å¦‚æœä½ ç”¨çš„æ˜¯MySQL 5.7æˆ–æ›´æ–°ç‰ˆæœ¬ï¼Œå¯ä»¥åœ¨æ¯æ¬¡æ‰§è¡Œä¸€ä¸ªæ¯”è¾ƒå¤§çš„æ“ä½œåï¼Œé€šè¿‡æ‰§è¡Œ mysql_reset_connectionæ¥é‡æ–°åˆå§‹åŒ–è¿æ¥èµ„æºã€‚è¿™ä¸ªè¿‡ç¨‹ä¸éœ€è¦é‡è¿å’Œé‡æ–°åšæƒé™éªŒè¯ï¼Œä½†æ˜¯ä¼šå°†è¿æ¥æ¢å¤åˆ°åˆšåˆšåˆ›å»ºå®Œæ—¶çš„çŠ¶æ€ã€‚ æŸ¥è¯¢ç¼“å­˜å¦‚æœæŸ¥è¯¢å‘½ä¸­ç¼“å­˜å¯ä»¥ç›´æ¥è¿”å›ç»“æœï¼Œæ•ˆç‡ä¼šå¾ˆé«˜ã€‚ ä½†æ˜¯å¤§å¤šæ•°æƒ…å†µä¸‹æˆ‘ä¼šå»ºè®®ä½ ä¸è¦ä½¿ç”¨æŸ¥è¯¢ç¼“å­˜ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºæŸ¥è¯¢ç¼“å­˜å¾€å¾€å¼Šå¤§äºåˆ© æŸ¥è¯¢ç¼“å­˜çš„å¤±æ•ˆéå¸¸é¢‘ç¹ï¼Œåªè¦æœ‰å¯¹ä¸€ä¸ªè¡¨çš„æ›´æ–°ï¼Œè¿™ä¸ªè¡¨ä¸Šæ‰€æœ‰çš„æŸ¥è¯¢ç¼“å­˜éƒ½ä¼šè¢«æ¸…ç©ºã€‚ é€‚ç”¨äºé™æ€è¡¨ å¯ä»¥å°†å‚æ•°query_cache_typeè®¾ç½®æˆDEMANDï¼Œè¿™æ ·å¯¹äºé»˜è®¤çš„SQLè¯­å¥éƒ½ä¸ä½¿ç”¨æŸ¥è¯¢ç¼“å­˜ã€‚ å¯ä»¥ç”¨SQL_CACHEæ˜¾å¼æŒ‡å®šä½¿ç”¨æŸ¥è¯¢ç¼“å­˜ï¼š 1mysql&gt; select SQL_CACHE * from T where ID&#x3D;10ï¼› åˆ†æå™¨å¯¹SQLè¯­å¥åšè§£æã€‚ å¦‚æœè¡¨Tä¸­æ²¡æœ‰å­—æ®µkï¼Œè€Œä½ æ‰§è¡Œäº†è¿™ä¸ªè¯­å¥ select * from T where k=1, é‚£è‚¯å®šæ˜¯ä¼šæŠ¥â€œä¸å­˜åœ¨è¿™ä¸ªåˆ—â€çš„é”™è¯¯ï¼š â€œUnknown column â€˜kâ€™ in â€˜where clauseâ€™â€ã€‚ åˆ†æå™¨é˜¶æ®µæŠ¥é”™ ä¼˜åŒ–å™¨æ‰§è¡Œå™¨åˆ¤æ–­æœ‰æ— æ‰§è¡ŒæŸ¥è¯¢çš„æƒé™ ä¸€æ¡SQLæ›´æ–°è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„redo logbinlogè¿™ä¸¤ç§æ—¥å¿—æœ‰ä»¥ä¸‹ä¸‰ç‚¹ä¸åŒï¼š redo logæ˜¯InnoDBå¼•æ“ç‰¹æœ‰çš„ï¼›binlogæ˜¯MySQLçš„Serverå±‚å®ç°çš„ï¼Œæ‰€æœ‰å¼•æ“éƒ½å¯ä»¥ä½¿ç”¨ã€‚ redo logæ˜¯ç‰©ç†æ—¥å¿—ï¼Œè®°å½•çš„æ˜¯â€œåœ¨æŸä¸ªæ•°æ®é¡µä¸Šåšäº†ä»€ä¹ˆä¿®æ”¹â€ï¼›binlogæ˜¯é€»è¾‘æ—¥å¿—ï¼Œè®°å½•çš„æ˜¯è¿™ä¸ªè¯­å¥çš„åŸå§‹é€»è¾‘ï¼Œæ¯”å¦‚â€œç»™ID=2è¿™ä¸€è¡Œçš„cå­—æ®µåŠ 1 â€ã€‚ redo logæ˜¯å¾ªç¯å†™çš„ï¼Œç©ºé—´å›ºå®šä¼šç”¨å®Œï¼›binlogæ˜¯å¯ä»¥è¿½åŠ å†™å…¥çš„ã€‚â€œè¿½åŠ å†™â€æ˜¯æŒ‡binlogæ–‡ä»¶å†™åˆ°ä¸€å®šå¤§å°åä¼šåˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªï¼Œå¹¶ä¸ä¼šè¦†ç›–ä»¥å‰çš„æ—¥å¿—ã€‚ ä¸¤é˜¶æ®µæäº¤ ğŸ‘†å›¾redo logç”¨äºä¿è¯crash-safeèƒ½åŠ›ã€‚innodb_flush_log_at_trx_commitè¿™ä¸ªå‚æ•°è®¾ç½®æˆ1çš„æ—¶å€™ï¼Œè¡¨ç¤ºæ¯æ¬¡äº‹åŠ¡çš„redo logéƒ½ç›´æ¥æŒä¹…åŒ–åˆ°ç£ç›˜ã€‚å»ºè®®è®¾ç½®æˆ1ï¼Œè¿™æ ·å¯ä»¥ä¿è¯MySQLå¼‚å¸¸é‡å¯ä¹‹åæ•°æ®ä¸ä¸¢å¤±ã€‚ äº‹åŠ¡éš”ç¦»ï¼šä¸ºä»€ä¹ˆä½ æ”¹äº†æˆ‘è¿˜çœ‹ä¸è§éš”ç¦»æ€§å’Œéš”ç¦»çº§åˆ«ACIDï¼ˆAtomicityã€Consistencyã€Isolationã€Durabilityï¼Œå³åŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§ã€æŒä¹…æ€§ï¼‰ éš”ç¦»çº§åˆ« è§£å†³å¯èƒ½å‡ºç°è„è¯»ï¼ˆdirty readï¼‰ã€ä¸å¯é‡å¤è¯»ï¼ˆnon-repeatable readï¼‰ã€å¹»è¯»ï¼ˆphantom readï¼‰çš„é—®é¢˜ã€‚ SQLæ ‡å‡†çš„äº‹åŠ¡éš”ç¦»çº§åˆ«åŒ…æ‹¬ï¼š è¯»æœªæäº¤ï¼ˆread uncommittedï¼‰ã€è¯»æäº¤ï¼ˆread committedï¼‰ã€å¯é‡å¤è¯»ï¼ˆrepeatable readï¼‰å’Œä¸²è¡ŒåŒ–ï¼ˆserializable ï¼‰ã€‚ è¯»æœªæäº¤ï¼šä¸€ä¸ªäº‹åŠ¡è¿˜æ²¡æäº¤æ—¶ï¼Œå®ƒåšçš„å˜æ›´å°±èƒ½è¢«åˆ«çš„äº‹åŠ¡çœ‹åˆ°ã€‚ è¯»æäº¤ï¼šä¸€ä¸ªäº‹åŠ¡æäº¤ä¹‹åï¼Œå®ƒåšçš„å˜æ›´æ‰ä¼šè¢«å…¶ä»–äº‹åŠ¡çœ‹åˆ°ã€‚ å¯é‡å¤è¯»ï¼šä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­çœ‹åˆ°çš„æ•°æ®ï¼Œæ€»æ˜¯è·Ÿè¿™ä¸ªäº‹åŠ¡åœ¨å¯åŠ¨æ—¶çœ‹åˆ°çš„æ•°æ®æ˜¯ä¸€è‡´çš„ã€‚å½“ç„¶åœ¨å¯é‡å¤è¯»éš”ç¦»çº§åˆ«ä¸‹ï¼Œæœªæäº¤å˜æ›´å¯¹å…¶ä»–äº‹åŠ¡ä¹Ÿæ˜¯ä¸å¯è§çš„ã€‚ ä¸²è¡ŒåŒ–ï¼šå¯¹äºåŒä¸€è¡Œè®°å½•ï¼Œâ€œå†™â€ä¼šåŠ â€œå†™é”â€ï¼Œâ€œè¯»â€ä¼šåŠ â€œè¯»é”â€ã€‚å½“å‡ºç°è¯»å†™é”å†²çªçš„æ—¶å€™ï¼Œåè®¿é—®çš„äº‹åŠ¡å¿…é¡»ç­‰å‰ä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œå®Œæˆï¼Œæ‰èƒ½ç»§ç»­æ‰§è¡Œã€‚ è‹¥éš”ç¦»çº§åˆ«æ˜¯â€œ__è¯»æœªæäº¤__â€ï¼Œ åˆ™V1çš„å€¼å°±æ˜¯2ã€‚è¿™æ—¶å€™äº‹åŠ¡Bè™½ç„¶è¿˜æ²¡æœ‰æäº¤ï¼Œä½†æ˜¯ç»“æœå·²ç»è¢«Açœ‹åˆ°äº†ã€‚å› æ­¤ï¼ŒV2ã€V3ä¹Ÿéƒ½æ˜¯2ã€‚ è‹¥æ˜¯â€œ__è¯»æäº¤__â€ï¼Œåˆ™V1æ˜¯1ï¼ŒV2çš„å€¼æ˜¯2ã€‚äº‹åŠ¡Bçš„æ›´æ–°åœ¨æäº¤åæ‰èƒ½è¢«Açœ‹åˆ°ã€‚æ‰€ä»¥ï¼Œ V3çš„å€¼ä¹Ÿæ˜¯2ã€‚ è‹¥æ˜¯â€œ__å¯é‡å¤è¯»__â€ï¼Œåˆ™V1ã€V2æ˜¯1ï¼ŒV3æ˜¯2ã€‚ä¹‹æ‰€ä»¥V2è¿˜æ˜¯1ï¼Œéµå¾ªçš„å°±æ˜¯è¿™ä¸ªè¦æ±‚ï¼šäº‹åŠ¡åœ¨æ‰§è¡ŒæœŸé—´çœ‹åˆ°çš„æ•°æ®å‰åå¿…é¡»æ˜¯ä¸€è‡´çš„ã€‚ è‹¥æ˜¯â€œ__ä¸²è¡ŒåŒ–__â€ï¼Œåˆ™åœ¨äº‹åŠ¡Bæ‰§è¡Œâ€œå°†1æ”¹æˆ2â€çš„æ—¶å€™ï¼Œä¼šè¢«é”ä½ã€‚ç›´åˆ°äº‹åŠ¡Aæäº¤åï¼Œäº‹åŠ¡Bæ‰å¯ä»¥ç»§ç»­æ‰§è¡Œã€‚æ‰€ä»¥ä»Açš„è§’åº¦çœ‹ï¼Œ V1ã€V2å€¼æ˜¯1ï¼ŒV3çš„å€¼æ˜¯2ã€‚ åœ¨å®ç°ä¸Šï¼Œæ•°æ®åº“é‡Œé¢ä¼šåˆ›å»ºä¸€ä¸ªè§†å›¾ï¼Œè®¿é—®çš„æ—¶å€™ä»¥è§†å›¾çš„é€»è¾‘ç»“æœä¸ºå‡†ã€‚ å¯é‡å¤è¯»ï¼šè¿™ä¸ªè§†å›¾æ˜¯åœ¨äº‹åŠ¡å¯åŠ¨æ—¶åˆ›å»ºçš„ï¼Œæ•´ä¸ªäº‹åŠ¡å­˜åœ¨æœŸé—´éƒ½ç”¨è¿™ä¸ªè§†å›¾ã€‚ è¯»æäº¤ï¼šè¿™ä¸ªè§†å›¾æ˜¯åœ¨æ¯ä¸ªSQLè¯­å¥å¼€å§‹æ‰§è¡Œçš„æ—¶å€™åˆ›å»ºçš„ã€‚ è¯»æœªæäº¤ï¼šç›´æ¥è¿”å›è®°å½•ä¸Šçš„æœ€æ–°å€¼ï¼Œæ²¡æœ‰è§†å›¾æ¦‚å¿µ ä¸²è¡ŒåŒ–ï¼šç›´æ¥ç”¨åŠ é”çš„æ–¹å¼æ¥é¿å…å¹¶è¡Œè®¿é—®ã€‚ é…ç½®çš„æ–¹å¼æ˜¯ï¼Œå°†å¯åŠ¨å‚æ•° transaction-isolation çš„å€¼è®¾ç½®æˆREAD-COMMITTEDã€‚ä½ å¯ä»¥ç”¨show variablesæ¥æŸ¥çœ‹å½“å‰çš„å€¼ã€‚ 1234567891011mysql&gt; show variables like &#39;transaction_isolation&#39;;+-----------------------+----------------+| Variable_name | Value |+-----------------------+----------------+| transaction_isolation | READ-COMMITTED |+-----------------------+----------------+ äº‹åŠ¡éš”ç¦»çš„å®ç° â€‹ å›æ»šæ—¥å¿—ä»€ä¹ˆæ—¶å€™åˆ é™¤ï¼Ÿç³»ç»Ÿä¼šåˆ¤æ–­å½“æ²¡æœ‰äº‹åŠ¡éœ€è¦ç”¨åˆ°è¿™äº›å›æ»šæ—¥å¿—çš„æ—¶å€™ï¼Œå›æ»šæ—¥å¿—ä¼šè¢«åˆ é™¤ã€‚â€‹ ä»€ä¹ˆæ—¶å€™ä¸éœ€è¦äº†ï¼Ÿå½“ç³»ç»Ÿé‡Œä¹ˆæœ‰æ¯”è¿™ä¸ªå›æ»šæ—¥å¿—æ›´æ—©çš„read-viewçš„æ—¶å€™ã€‚ â€‹ ä¸ºä»€ä¹ˆå°½é‡ä¸è¦ä½¿ç”¨é•¿äº‹åŠ¡ï¼Ÿé•¿äº‹åŠ¡æ„å‘³ç€ç³»ç»Ÿé‡Œé¢ä¼šå­˜åœ¨å¾ˆè€çš„äº‹åŠ¡è§†å›¾ï¼Œåœ¨è¿™ä¸ªäº‹åŠ¡æäº¤ä¹‹å‰ï¼Œå›æ»šè®°å½•éƒ½è¦ä¿ç•™ï¼Œè¿™ä¼šå¯¼è‡´å¤§é‡å ç”¨å­˜å‚¨ç©ºé—´ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œé•¿äº‹åŠ¡è¿˜å ç”¨é”èµ„æºï¼Œå¯èƒ½ä¼šæ‹–å®åº“ã€‚ äº‹åŠ¡å¯åŠ¨æ–¹å¼MySQLçš„äº‹åŠ¡å¯åŠ¨æ–¹å¼ï¼š æ˜¾å¼å¯åŠ¨äº‹åŠ¡è¯­å¥ï¼Œ begin æˆ– start transactionã€‚é…å¥—çš„æäº¤è¯­å¥æ˜¯commitï¼Œå›æ»šè¯­å¥æ˜¯rollbackã€‚ set autocommit=0ï¼Œè¿™ä¸ªå‘½ä»¤ä¼šå°†è¿™ä¸ªçº¿ç¨‹çš„è‡ªåŠ¨æäº¤å…³æ‰ã€‚æ„å‘³ç€å¦‚æœä½ åªæ‰§è¡Œä¸€ä¸ªselectè¯­å¥ï¼Œè¿™ä¸ªäº‹åŠ¡å°±å¯åŠ¨äº†ï¼Œè€Œä¸”å¹¶ä¸ä¼šè‡ªåŠ¨æäº¤ã€‚è¿™ä¸ªäº‹åŠ¡æŒç»­å­˜åœ¨ç›´åˆ°ä½ ä¸»åŠ¨æ‰§è¡Œcommit æˆ– rollback è¯­å¥ï¼Œæˆ–è€…æ–­å¼€è¿æ¥ã€‚ å»ºè®®ä½¿ç”¨æ–¹æ³•ä¸€ï¼Œå¦‚æœè€ƒè™‘å¤šä¸€æ¬¡äº¤äº’é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨commit work and chainè¯­æ³•ã€‚åœ¨autocommit=1çš„æƒ…å†µä¸‹ç”¨beginæ˜¾å¼å¯åŠ¨äº‹åŠ¡ï¼Œå¦‚æœæ‰§è¡Œcommitåˆ™æäº¤äº‹åŠ¡ã€‚å¦‚æœæ‰§è¡Œcommit work and chainåˆ™æäº¤äº‹åŠ¡å¹¶è‡ªåŠ¨å¯åŠ¨ä¸‹ä¸€ä¸ªäº‹åŠ¡ã€‚ æ·±å…¥æµ…å‡ºç´¢å¼•ï¼ˆä¸Šï¼‰â€‹ å¯¹äºæ•°æ®åº“çš„è¡¨è€Œè¨€ï¼Œç´¢å¼•å…¶å®å°±æ˜¯å®ƒçš„â€œç›®å½•â€ã€‚ ç´¢å¼•çš„å¸¸è§æ¨¡å‹ å“ˆå¸Œè¡¨ï¼šé”® - å€¼(key - value) å› ä¸ºä¸æ˜¯æœ‰åºçš„ï¼Œæ‰€ä»¥å“ˆå¸Œç´¢å¼•åšåŒºé—´æŸ¥è¯¢çš„é€Ÿåº¦æ˜¯å¾ˆæ…¢çš„ã€‚å“ˆå¸Œè¡¨è¿™ç§ç»“æ„é€‚ç”¨äºåªæœ‰ç­‰å€¼æŸ¥è¯¢çš„åœºæ™¯ æœ‰åºæ•°ç»„ï¼šæŒ‰é¡ºåºå­˜å‚¨ã€‚æŸ¥è¯¢ç”¨äºŒåˆ†æ³•å°±å¯ä»¥å¿«é€ŸæŸ¥è¯¢ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ï¼šO(log(N)) æœ‰åºæ•°ç»„åœ¨ç­‰å€¼æŸ¥è¯¢å’ŒèŒƒå›´æŸ¥è¯¢åœºæ™¯ä¸­çš„æ€§èƒ½å°±éƒ½éå¸¸ä¼˜ç§€ æ›´æ–°æ•°æ®æˆæœ¬é«˜ï¼Œæœ‰åºæ•°ç»„ç´¢å¼•åªé€‚ç”¨äºé™æ€å­˜å‚¨å¼•æ“ æœç´¢æ ‘ æƒ³è±¡ä¸€ä¸‹ä¸€æ£µ100ä¸‡èŠ‚ç‚¹çš„å¹³è¡¡äºŒå‰æ ‘ï¼Œæ ‘é«˜20ã€‚ä¸€æ¬¡æŸ¥è¯¢å¯èƒ½éœ€è¦è®¿é—®20ä¸ªæ•°æ®å—ã€‚åœ¨æœºæ¢°ç¡¬ç›˜æ—¶ä»£ï¼Œä»ç£ç›˜éšæœºè¯»ä¸€ä¸ªæ•°æ®å—éœ€è¦10 mså·¦å³çš„å¯»å€æ—¶é—´ã€‚å¯¹äºä¸€ä¸ª100ä¸‡è¡Œçš„è¡¨ï¼Œå¦‚æœä½¿ç”¨äºŒå‰æ ‘æ¥å­˜å‚¨ï¼Œå•ç‹¬è®¿é—®ä¸€ä¸ªè¡Œå¯èƒ½éœ€è¦20ä¸ª10 msçš„æ—¶é—´ã€‚ ä¸ºäº†è®©ä¸€ä¸ªæŸ¥è¯¢å°½é‡å°‘åœ°è¯»ç£ç›˜ï¼Œå°±å¿…é¡»è®©æŸ¥è¯¢è¿‡ç¨‹è®¿é—®å°½é‡å°‘çš„æ•°æ®å—ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬å°±ä¸åº”è¯¥ä½¿ç”¨äºŒå‰æ ‘ï¼Œè€Œæ˜¯è¦ä½¿ç”¨â€œNå‰â€æ ‘ã€‚è¿™é‡Œï¼Œâ€œNå‰â€æ ‘ä¸­çš„â€œNâ€å–å†³äºæ•°æ®å—çš„å¤§å°ã€‚ InnoDBçš„ç´¢å¼•æ¨¡å‹åœ¨InnoDBä¸­ï¼Œè¡¨éƒ½æ˜¯æ ¹æ®ä¸»é”®é¡ºåºä»¥ç´¢å¼•çš„å½¢å¼å­˜æ”¾çš„ï¼Œè¿™ç§å­˜å‚¨æ–¹å¼çš„è¡¨ç§°ä¸ºç´¢å¼•ç»„ç»‡è¡¨ã€‚åˆå› ä¸ºå‰é¢æˆ‘ä»¬æåˆ°çš„ï¼ŒInnoDBä½¿ç”¨äº†B+æ ‘ç´¢å¼•æ¨¡å‹ï¼Œæ‰€ä»¥æ•°æ®éƒ½æ˜¯å­˜å‚¨åœ¨B+æ ‘ä¸­çš„ã€‚ å»ºè¡¨è¯­å¥æ˜¯ï¼š 12345mysql&gt; create table T(id int primary key, k int not null, name varchar(16),index (k))engine&#x3D;InnoDB; è¡¨ä¸­R1~R5çš„(ID,k)å€¼åˆ†åˆ«ä¸º(100,1)ã€(200,2)ã€(300,3)ã€(500,5)å’Œ(600,6)ï¼Œä¸¤æ£µæ ‘çš„ç¤ºä¾‹ç¤ºæ„å›¾å¦‚ä¸‹ã€‚ ç´¢å¼•ç±»å‹åˆ†ä¸ºä¸»é”®ç´¢å¼•å’Œéä¸»é”®ç´¢å¼•ã€‚ ä¸»é”®ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜çš„æ˜¯æ•´è¡Œæ•°æ®ã€‚åœ¨InnoDBé‡Œï¼Œä¸»é”®ç´¢å¼•ä¹Ÿè¢«ç§°ä¸ºèšç°‡ç´¢å¼•ï¼ˆclustered indexï¼‰ã€‚ éä¸»é”®ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å†…å®¹æ˜¯ä¸»é”®çš„å€¼ã€‚åœ¨InnoDBé‡Œï¼Œéä¸»é”®ç´¢å¼•ä¹Ÿè¢«ç§°ä¸ºäºŒçº§ç´¢å¼•ï¼ˆsecondary indexï¼‰ã€‚ åŸºäºä¸»é”®ç´¢å¼•å’Œæ™®é€šç´¢å¼•çš„æŸ¥è¯¢æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ å¦‚æœè¯­å¥æ˜¯select * from T where ID=500ï¼Œå³ä¸»é”®æŸ¥è¯¢æ–¹å¼ï¼Œåˆ™åªéœ€è¦æœç´¢IDè¿™æ£µB+æ ‘ï¼› å¦‚æœè¯­å¥æ˜¯select * from T where k=5ï¼Œå³æ™®é€šç´¢å¼•æŸ¥è¯¢æ–¹å¼ï¼Œåˆ™éœ€è¦å…ˆæœç´¢kç´¢å¼•æ ‘ï¼Œå¾—åˆ°IDçš„å€¼ä¸º500ï¼Œå†åˆ°IDç´¢å¼•æ ‘æœç´¢ä¸€æ¬¡ã€‚è¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºå›è¡¨ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼ŒåŸºäºéä¸»é”®ç´¢å¼•çš„æŸ¥è¯¢éœ€è¦å¤šæ‰«æä¸€æ£µç´¢å¼•æ ‘ ç´¢å¼•ç»´æŠ¤ä»æ€§èƒ½å’Œå­˜å‚¨ç©ºé—´æ–¹é¢è€ƒé‡ï¼Œè‡ªå¢ä¸»é”®å¾€å¾€æ˜¯æ›´åˆç†çš„é€‰æ‹©ã€‚ æ·±å…¥æµ…å‡ºç´¢å¼•ï¼ˆä¸‹ï¼‰åœ¨ä¸‹é¢è¿™ä¸ªè¡¨Tä¸­ï¼Œå¦‚æœæˆ‘æ‰§è¡Œ select * from T where k between 3 and 5ï¼Œéœ€è¦æ‰§è¡Œå‡ æ¬¡æ ‘çš„æœç´¢æ“ä½œï¼Œä¼šæ‰«æå¤šå°‘è¡Œï¼Ÿ ä¸‹é¢æ˜¯è¿™ä¸ªè¡¨çš„åˆå§‹åŒ–è¯­å¥ã€‚ 12345678mysql&gt; create table T (ID int primary key,k int NOT NULL DEFAULT 0, s varchar(16) NOT NULL DEFAULT &#39;&#39;,index k(k))engine&#x3D;InnoDB;insert into T values(100,1, &#39;aa&#39;),(200,2,&#39;bb&#39;),(300,3,&#39;cc&#39;),(500,5,&#39;ee&#39;),(600,6,&#39;ff&#39;),(700,7,&#39;gg&#39;); è¦†ç›–ç´¢å¼•ç”±äºè¦†ç›–ç´¢å¼•å¯ä»¥å‡å°‘æ ‘çš„æœç´¢æ¬¡æ•°ï¼Œæ˜¾è‘—æå‡æŸ¥è¯¢æ€§èƒ½ï¼Œæ‰€ä»¥ä½¿ç”¨è¦†ç›–ç´¢å¼•æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„æ€§èƒ½ä¼˜åŒ–æ‰‹æ®µã€‚ æœ€å·¦å‰ç¼€åŸåˆ™B+æ ‘è¿™ç§ç´¢å¼•ç»“æ„ï¼Œå¯ä»¥åˆ©ç”¨ç´¢å¼•çš„â€œæœ€å·¦å‰ç¼€â€ï¼Œæ¥å®šä½è®°å½•ã€‚ ç¬¬ä¸€åŸåˆ™æ˜¯ï¼Œå¦‚æœé€šè¿‡è°ƒæ•´é¡ºåºï¼Œå¯ä»¥å°‘ç»´æŠ¤ä¸€ä¸ªç´¢å¼•ï¼Œé‚£ä¹ˆè¿™ä¸ªé¡ºåºå¾€å¾€å°±æ˜¯éœ€è¦ä¼˜å…ˆè€ƒè™‘é‡‡ç”¨çš„ ç´¢å¼•ä¸‹æ¨ æ— ç´¢å¼•ä¸‹æ¨æ‰§è¡Œæµç¨‹ ç´¢å¼•ä¸‹æ¨æ‰§è¡Œæµç¨‹ è®²å…¨å±€é”å’Œè¡¨é”ï¼šç»™è¡¨åŠ ä¸ªå­—æ®µæ€ä¹ˆæœ‰è¿™ä¹ˆå¤šé˜»ç¢æ ¹æ®åŠ é”çš„èŒƒå›´ï¼ŒMySQLé‡Œé¢çš„é”å¤§è‡´å¯ä»¥åˆ†æˆå…¨å±€é”ã€è¡¨çº§é”å’Œè¡Œé”ä¸‰ç±»ã€‚ å…¨å±€é”å…¨å±€é”çš„å…¸å‹ä½¿ç”¨åœºæ™¯æ˜¯å…¨åº“é€»è¾‘å¤‡ä»½ã€‚","categories":[],"tags":[{"name":"ç¬”è®°","slug":"ç¬”è®°","permalink":"https://lemon-fruit.github.io/tags/%E7%AC%94%E8%AE%B0/"}]},{"title":"Spring5","slug":"Spring5","date":"2021-04-08T11:45:18.229Z","updated":"2021-04-08T12:26:15.300Z","comments":true,"path":"2021/04/08/Spring5/","link":"","permalink":"https://lemon-fruit.github.io/2021/04/08/Spring5/","excerpt":"","text":"","categories":[],"tags":[]},{"title":"CPUä¸Šä¸‹æ–‡åˆ‡æ¢","slug":"CPUä¸Šä¸‹æ–‡åˆ‡æ¢","date":"2021-04-08T08:50:33.000Z","updated":"2021-04-08T12:16:03.636Z","comments":true,"path":"2021/04/08/CPUä¸Šä¸‹æ–‡åˆ‡æ¢/","link":"","permalink":"https://lemon-fruit.github.io/2021/04/08/CPU%E4%B8%8A%E4%B8%8B%E6%96%87%E5%88%87%E6%8D%A2/","excerpt":"CPUä¸Šä¸‹æ–‡åˆ‡æ¢ ä»€ä¹ˆæ˜¯CPUä¸Šä¸‹æ–‡ â€‹ CPU ä¸Šä¸‹æ–‡å°±æ˜¯CPU å¯„å­˜å™¨å’Œ__ç¨‹åºè®¡æ•°å™¨__ï¼Œå®ƒä»¬éƒ½æ˜¯ CPU åœ¨è¿è¡Œä»»ä½•ä»»åŠ¡å‰ï¼Œå¿…é¡»çš„ä¾èµ–ç¯å¢ƒ.","text":"CPUä¸Šä¸‹æ–‡åˆ‡æ¢ ä»€ä¹ˆæ˜¯CPUä¸Šä¸‹æ–‡ â€‹ CPU ä¸Šä¸‹æ–‡å°±æ˜¯CPU å¯„å­˜å™¨å’Œ__ç¨‹åºè®¡æ•°å™¨__ï¼Œå®ƒä»¬éƒ½æ˜¯ CPU åœ¨è¿è¡Œä»»ä½•ä»»åŠ¡å‰ï¼Œå¿…é¡»çš„ä¾èµ–ç¯å¢ƒ. CPUä¸Šä¸‹æ–‡åˆ‡æ¢çš„ç±»å‹ï¼š è¿›ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ ä¸­æ–­ä¸Šä¸‹æ–‡åˆ‡æ¢ ç³»ç»Ÿè°ƒç”¨ ä»ç”¨æˆ·æ€åˆ°å†…æ ¸æ€è½¬å˜ï¼Œéœ€è¦ç”¨åˆ°ç³»ç»Ÿè°ƒç”¨ ä¸€æ¬¡ç³»ç»Ÿè°ƒç”¨çš„è¿‡ç¨‹ï¼Œå…¶å®å‘ç”Ÿäº†ä¸¤æ¬¡CPUä¸Šä¸‹æ–‡é—®åˆ‡æ¢ ç³»ç»Ÿè°ƒç”¨è¿‡ç¨‹ä¸­ä¸€ç›´æ˜¯åŒä¸€ä¸ªè¿›ç¨‹åœ¨è¿è¡Œ è¿›ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ è¿›ç¨‹æ˜¯ç”±å†…æ ¸æ¥ç®¡ç†å’Œè°ƒåº¦çš„ï¼Œè¿›ç¨‹çš„åˆ‡æ¢åªèƒ½å‘ç”Ÿåœ¨å†…æ ¸æ€ çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ çº¿ç¨‹æ˜¯è°ƒåº¦çš„åŸºæœ¬å•ä½ï¼Œè€Œè¿›ç¨‹åˆ™æ˜¯èµ„æºæ‹¥æœ‰çš„åŸºæœ¬å•ä½ çº¿ç¨‹æœ‰è‡ªå·±çš„ç§æœ‰æ•°æ®ï¼Œæ¯”å¦‚æ ˆå’Œå¯„å­˜å™¨ ä¸­æ–­ä¸Šä¸‹æ–‡åˆ‡æ¢ å¯¹åŒä¸€ä¸ªCPUï¼Œä¸­æ–­å¤„ç†æ¯”è¿›ç¨‹æ‹¥æœ‰è·Ÿé«˜çš„ä¼˜å…ˆçº§ ä¸­æ–­ä¸Šä¸‹æ–‡åˆ‡æ¢å¹¶ä¸æ¶‰åŠåˆ°è¿›ç¨‹çš„ç”¨æˆ·æ€","categories":[],"tags":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"https://lemon-fruit.github.io/tags/%E9%9A%8F%E7%AC%94/"}],"author":"Lemon"},{"title":"JVM","slug":"JVM","date":"2021-03-31T07:19:58.000Z","updated":"2021-04-08T12:24:43.748Z","comments":true,"path":"2021/03/31/JVM/","link":"","permalink":"https://lemon-fruit.github.io/2021/03/31/JVM/","excerpt":"","text":"JMM ä»€ä¹ˆæ˜¯JMM JMMï¼šjava å†…å­˜æ¨¡å‹ ä½œç”¨ï¼šç¼“å­˜ä¸€è‡´æ€§åè®®ï¼Œç”¨äºå®šä¹‰æ•°æ®è¯»å†™çš„è§„åˆ™","categories":[],"tags":[{"name":"ç¬”è®°","slug":"ç¬”è®°","permalink":"https://lemon-fruit.github.io/tags/%E7%AC%94%E8%AE%B0/"}]},{"title":"Hello World","slug":"hello-world","date":"2021-03-03T03:39:33.817Z","updated":"2021-04-08T12:17:00.502Z","comments":true,"path":"2021/03/03/hello-world/","link":"","permalink":"https://lemon-fruit.github.io/2021/03/03/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1hexo new &quot;My New Post&quot; More info: Writing Run server1hexo server More info: Server Generate static files1hexo generate More info: Generating Deploy to remote sites1hexo deploy More info: Deployment","categories":[],"tags":[]},{"title":"JUC","slug":"JUC","date":"2021-03-01T11:34:49.000Z","updated":"2021-04-08T12:23:26.631Z","comments":true,"path":"2021/03/01/JUC/","link":"","permalink":"https://lemon-fruit.github.io/2021/03/01/JUC/","excerpt":"3.Locké”ï¼ˆé‡ç‚¹ï¼‰ Synchronized å’Œ LockåŒºåˆ«","text":"3.Locké”ï¼ˆé‡ç‚¹ï¼‰ Synchronized å’Œ LockåŒºåˆ« Synchronized å†…ç½®çš„javaå…³é”®è¯ï¼ŒLockæ˜¯ä¸€ä¸ªjavaç±» Synchronized æ— æ³• åˆ¤æ–­è·å–æ‰€å¾—çŠ¶æ€ï¼ŒLock å¯ä»¥åˆ¤æ–­æ˜¯å¦è·å–åˆ°äº†é” Synchronized ä¼šè‡ªåŠ¨é‡Šæ”¾ï¼ŒLockå¿…é¡»æ‰‹åŠ¨é‡Šæ”¾é”ï¼å¦‚æœä¸æ˜¯é‡Šæ”¾é”ï¼Œæ­»é” Synchronized çº¿ç¨‹1ï¼ˆè·å¾—é”ï¼‰ï¼Œçº¿ç¨‹2ï¼ˆç­‰å¾…ï¼‰ï¼›Locké”å°±ä¸ä¸€å®šç­‰å¾…ä¸‹å» Synchronized å¯é‡å…¥é”ï¼Œä¸å¯ä»¥ä¸­æ–­çš„ï¼Œéå…¬å¹³ï¼›Lockï¼Œå¯é‡å…¥é”ï¼Œå¯ä»¥åˆ¤æ–­é”ï¼Œéå…¬å¹³ï¼ˆå¯ä»¥è‡ªå·±è®¾ç½®ï¼‰ Synchronized é€‚åˆé”å°‘é‡çš„ä»£ç åŒæ­¥é—®é¢˜ï¼ŒLocké€‚åˆé”å¤§é‡çš„åŒæ­¥ä»£ç  4ã€ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…4.1 ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…é—®é¢˜Synchronized ç‰ˆ12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152package com.swpu.pc;/** * çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡é—®é¢˜:ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ï¼Œç­‰å¾…å”¤é†’ï¼Œé€šçŸ¥å”¤é†’ * çº¿ç¨‹äº¤æ›¿è¿›è¡Œ A B æ“ä½œåŒä¸€ä¸ªå˜é‡ num=0 * A num + 1 * B num - 1 */public class A &#123; public static void main(String[] args) &#123; Data data = new Data(); new Thread(() -&gt; &#123; for (int i = 0; i &lt; 10; i++) &#123; try &#123; data.decrement(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125;, &quot;A&quot;).start(); new Thread(() -&gt; &#123; for (int i = 0; i &lt; 10; i++) &#123; try &#123; data.increment(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125;, &quot;B&quot;).start(); &#125;&#125;class Data &#123; private int number = 0; public synchronized void increment() throws InterruptedException &#123; if (number != 0) &#123; this.wait(); &#125; number++; this.notifyAll(); System.out.println(Thread.currentThread().getName() + &quot;=&gt;&quot; + number); &#125; public synchronized void decrement() throws InterruptedException &#123; if (number == 0) &#123; this.wait(); &#125; number--; this.notifyAll(); System.out.println(Thread.currentThread().getName() + &quot;=&gt;&quot; + number); &#125;&#125; é—®é¢˜å­˜åœ¨ï¼ŒA B C D å››ä¸ªçº¿ç¨‹ ï¼ˆè™šå‡å”¤é†’ï¼‰ if æ”¹ä¸º while åˆ¤æ–­ 4.2 JUC ç‰ˆçš„ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970package com.swpu.pc;import java.util.concurrent.locks.Condition;import java.util.concurrent.locks.Lock;import java.util.concurrent.locks.ReentrantLock;public class B &#123; public static void main(String[] args) &#123; Data data = new Data(); new Thread(() -&gt; &#123; for (int i = 0; i &lt; 10; i++) &#123; try &#123; data.decrement(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125;, &quot;A&quot;).start(); new Thread(() -&gt; &#123; for (int i = 0; i &lt; 10; i++) &#123; try &#123; data.increment(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125;, &quot;B&quot;).start(); &#125;&#125;class Data2 &#123; private int number = 0; Lock lock = new ReentrantLock(); Condition condition = lock.newCondition(); public void increment() throws InterruptedException &#123; lock.lock(); try &#123; while (number != 0) &#123; condition.await(); &#125; number++; System.out.println(Thread.currentThread().getName() + &quot;=&gt;&quot; + number); condition.signalAll(); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; finally &#123; lock.unlock(); &#125; &#125; public synchronized void decrement() throws InterruptedException &#123; lock.lock(); try &#123; while (number == 0) &#123; condition.await(); &#125; number--; System.out.println(Thread.currentThread().getName() + &quot;=&gt;&quot; + number); condition.signalAll(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; finally &#123; lock.unlock(); &#125; &#125;&#125; Condition ç²¾å‡†çš„é€šçŸ¥å’Œå”¤é†’çº¿ç¨‹ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283package com.swpu.pc;import java.util.concurrent.locks.Condition;import java.util.concurrent.locks.Lock;import java.util.concurrent.locks.ReentrantLock;public class C &#123; public static void main(String[] args) &#123; Data3 data = new Data3(); new Thread(() -&gt; &#123; for (int i = 0; i &lt; 10; i++) &#123; data.printA(); &#125; &#125;, &quot;A&quot;).start(); new Thread(() -&gt; &#123; for (int i = 0; i &lt; 10; i++) &#123; data.printB(); &#125; &#125;, &quot;B&quot;).start(); new Thread(() -&gt; &#123; for (int i = 0; i &lt; 10; i++) &#123; data.printC(); &#125; &#125;, &quot;C&quot;).start(); &#125;&#125;class Data3 &#123; private Lock lock = new ReentrantLock(); private Condition condition1 = lock.newCondition(); private Condition condition2 = lock.newCondition(); private Condition condition3 = lock.newCondition(); private int number = 1; //1 A 2 B 3 C public void printA() &#123; lock.lock(); try &#123; //ä¸šåŠ¡ï¼Œåˆ¤æ–­-&gt; æ‰§è¡Œ -&gt; é€šçŸ¥ while (number != 1) &#123; condition1.await(); &#125; System.out.println(Thread.currentThread().getName() + &quot;=&gt;AAAAAAAAA&quot;); number = 2; condition2.signal(); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; finally &#123; lock.unlock(); &#125; &#125; public void printB() &#123; lock.lock(); try &#123; while (number != 2) &#123; condition2.await(); &#125; System.out.println(Thread.currentThread().getName() + &quot;=&gt;BBBBBBBB&quot;); number = 3; condition3.signal(); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; finally &#123; lock.unlock(); &#125; &#125; public void printC() &#123; lock.lock(); try &#123; while (number != 3) &#123; condition3.await(); &#125; System.out.println(Thread.currentThread().getName() + &quot;=&gt;CCCCCCCCCC&quot;); number = 1; condition1.signal(); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; finally &#123; lock.unlock(); &#125; &#125;&#125; 5ã€å…«é”ç°è±¡å½»åº•ç†è§£é” å°ç»“ new this å…·ä½“çš„ä¸€ä¸ªæ‰‹æœº static Class å”¯ä¸€çš„ä¸€ä¸ªæ¨¡æ¿ 6ã€é›†åˆç±»ä¸å®‰å…¨6.1 List ä¸å®‰å…¨1234567891011121314151617181920212223242526272829303132333435package com.swpu.unsafe;import java.util.*;import java.util.concurrent.CopyOnWriteArrayList;public class ListTest &#123; public static void main(String[] args) &#123; //å¹¶å‘ä¸‹ArrayListä¸å®‰å…¨çš„ /* è§£å†³æ–¹æ¡ˆï¼š 1. List&lt;String&gt; list = new Vector&lt;&gt;(); 2. List&lt;String&gt; list = Collections.synchronizedList(new ArrayList&lt;&gt;()); 3. List&lt;String&gt; list = new CopyOnWriteArrayList&lt;&gt;(); */ //List&lt;String&gt; list = new ArrayList&lt;&gt;(); //List&lt;String&gt; list = new Vector&lt;&gt;(); List&lt;String&gt; list = Collections.synchronizedList(new ArrayList&lt;&gt;()); /* CopyOnWrite å†™å…¥æ—¶å¤åˆ¶ è®¡ç®—æœºç¨‹åºè®¾è®¡é¢†åŸŸçš„ä¸€ç§ä¼˜åŒ–ç­–ç•¥ å¤šä¸ªçº¿ç¨‹è°ƒç”¨çš„çš„æ—¶å€™ï¼Œlistï¼Œè¯»å–çš„æ—¶å€™ï¼Œå›ºå®šçš„ï¼Œå†™å…¥ï¼ˆè¦†ç›–ï¼‰ åœ¨å†™å…¥çš„æ—¶å€™é¿å…è¦†ç›–ï¼Œé€ æˆæ•°æ®é—®é¢˜ è¯»å†™åˆ†ç¦» */ //List&lt;String&gt; list = new CopyOnWriteArrayList&lt;&gt;(); for (int i = 1; i &lt;= 10; i++) &#123; new Thread(() -&gt; &#123; list.add(UUID.randomUUID().toString().substring(0, 5)); System.out.println(list); &#125;, String.valueOf(i)).start(); &#125; &#125;&#125; 6.3 Map ä¸å®‰å…¨12345678910111213141516171819202122package com.swpu.unsafe;import java.util.HashMap;import java.util.Map;import java.util.UUID;import java.util.concurrent.ConcurrentHashMap;import java.util.concurrent.ConcurrentMap;public class MapTest &#123; public static void main(String[] args) &#123; //Map&lt;String, String&gt; map = new HashMap&lt;&gt;(); Map&lt;String, String&gt; map = new ConcurrentHashMap&lt;&gt;(); for (int i = 0; i &lt; 80; i++) &#123; new Thread(() -&gt; &#123; map.put(Thread.currentThread().getName(), UUID.randomUUID().toString().substring(0, 5)); System.out.println(map); &#125;, String.valueOf(i)).start(); &#125; &#125;&#125; 7. Callable å¯ä»¥æœ‰è¿”å›å€¼ å¯ä»¥æŠ›å‡ºå¼‚å¸¸ æ–¹æ³•ä¸åŒï¼Œrun()/call() 123456789101112131415161718192021222324252627package com.swpu.callable;import java.util.concurrent.Callable;import java.util.concurrent.ExecutionException;import java.util.concurrent.FutureTask;public class CallableTest &#123; public static void main(String[] args) throws ExecutionException, InterruptedException &#123; MyThread thread = new MyThread(); FutureTask futureTask = new FutureTask(thread);//é€‚é…ç±» new Thread(futureTask, &quot;A&quot;).start(); Integer o = (Integer) futureTask.get(); System.out.println(o); &#125;&#125;class MyThread implements Callable&lt;Integer&gt; &#123; @Override public Integer call() throws Exception &#123; System.out.println(&quot;Call()&quot;); return 1024; &#125;&#125; ç»†èŠ‚ï¼š æœ‰ç¼“å­˜ ç»“æœå¯èƒ½éœ€è¦ç­‰å¾…ï¼Œä¼šé˜»å¡ï¼ 8. å¸¸ç”¨çš„è¾…åŠ©ç±»8.1 CountDownLatch12345678910111213141516171819package com.swpu.add;import java.util.concurrent.CountDownLatch;public class CountDownLatchDemo &#123; public static void main(String[] args) throws InterruptedException &#123; CountDownLatch countDownLatch = new CountDownLatch(6); for (int i = 0; i &lt; 6; i++) &#123; new Thread(()-&gt;&#123; System.out.println(Thread.currentThread().getName() + &quot;Go Out&quot;); countDownLatch.countDown(); &#125;,String.valueOf(i)).start(); &#125; countDownLatch.await(); System.out.println(&quot;Close Door&quot;); &#125;&#125; åŸç†ï¼š ==countDownLatch.countDown();== //æ•°é‡-1 ==countDownLatch.await();== //ç­‰å¾…è®¡æ•°å½’é›¶ï¼Œç„¶åå†å‘ä¸‹æ‰§è¡Œ 8.2 CyclicBarrier123456789101112131415161718192021222324252627package com.swpu.add;import java.util.concurrent.BrokenBarrierException;import java.util.concurrent.CyclicBarrier;public class CyclicBarrierDemo &#123; public static void main(String[] args) &#123; CyclicBarrier cyclicBarrier = new CyclicBarrier(7, () -&gt; &#123; System.out.println(&quot;å¬å”¤ç¥é¾™æˆåŠŸ&quot;); &#125;); for (int i = 0; i &lt;= 7; i++) &#123; final int temp = i; new Thread(() -&gt; &#123; System.out.println(Thread.currentThread().getName() + &quot;æ”¶é›†&quot; + temp + &quot;ä¸ªé¾™ç &quot;); try &#123; cyclicBarrier.await(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; catch (BrokenBarrierException e) &#123; e.printStackTrace(); &#125; &#125;).start(); &#125; &#125;&#125; 8.3 Semaphore123456789101112131415161718192021222324252627package com.swpu.add;import java.util.concurrent.Semaphore;import java.util.concurrent.TimeUnit;public class SemaphoreDemo &#123; public static void main(String[] args) &#123; Semaphore semaphore = new Semaphore(3); for (int i = 0; i &lt;= 6; i++) &#123; new Thread(() -&gt; &#123; // acquire() å¾—åˆ° try &#123; semaphore.acquire(); System.out.println(Thread.currentThread().getName() + &quot;æŠ¢åˆ°è½¦ä½&quot;); TimeUnit.SECONDS.sleep(2); System.out.println(Thread.currentThread().getName() + &quot;ç¦»å¼€è½¦ä½&quot;); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; finally &#123; semaphore.release(); &#125; // release() é‡Šæ”¾ &#125;, String.valueOf(i)).start(); &#125; &#125;&#125; åŸç†ï¼š ==semaphore.acquire();== è·å¾—ï¼Œå‡è®¾å·²ç»æ»¡äº†ã€‚ç­‰å¾…ï¼Œç­‰å¾…è¢«é‡Šæ”¾ä¸ºæ­¢ ==semaphore.release();== é‡Šæ”¾ï¼Œä¼šå°†å½“å‰çš„ä¿¡å·é‡é‡Šæ”¾+1 9. è¯»å†™é”ReadWriteLock 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100package com.swpu.rw;import java.util.HashMap;import java.util.Map;import java.util.concurrent.locks.Lock;import java.util.concurrent.locks.ReadWriteLock;import java.util.concurrent.locks.ReentrantLock;import java.util.concurrent.locks.ReentrantReadWriteLock;/** * ç‹¬å é”ï¼ˆå†™é”ï¼‰ ä¸€æ¬¡åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹å æœ‰ * å…±äº«é”ï¼ˆè¯»é”ï¼‰ å¤šä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶å æœ‰ * ReadWriteLock * è¯»-è¯» å¯ä»¥å…±å­˜ï¼ * è¯»-å†™ ä¸èƒ½å…±å­˜ï¼ * å†™-å†™ ä¸èƒ½å…±å­˜ï¼ */public class ReadWriteLockDemo &#123; public static void main(String[] args) &#123; MyCache myCache = new MyCache(); // å†™å…¥ for (int i = 1; i &lt;= 5 ; i++) &#123; final int temp = i; new Thread(()-&gt;&#123; myCache.put(temp+&quot;&quot;,temp+&quot;&quot;); &#125;,String.valueOf(i)).start(); &#125; // è¯»å– for (int i = 1; i &lt;= 5 ; i++) &#123; final int temp = i; new Thread(()-&gt;&#123; myCache.get(temp+&quot;&quot;); &#125;,String.valueOf(i)).start(); &#125; &#125;&#125;// åŠ é”çš„class MyCacheLock&#123; private volatile Map&lt;String,Object&gt; map = new HashMap&lt;&gt;(); // è¯»å†™é”ï¼š æ›´åŠ ç»†ç²’åº¦çš„æ§åˆ¶ private ReadWriteLock readWriteLock = new ReentrantReadWriteLock(); private Lock lock = new ReentrantLock(); // å­˜ï¼Œå†™å…¥çš„æ—¶å€™ï¼Œåªå¸Œæœ›åŒæ—¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹å†™ public void put(String key,Object value)&#123; readWriteLock.writeLock().lock(); try &#123; System.out.println(Thread.currentThread().getName()+&quot;å†™å…¥&quot;+key); map.put(key,value); System.out.println(Thread.currentThread().getName()+&quot;å†™å…¥OK&quot;); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; finally &#123; readWriteLock.writeLock().unlock(); &#125; &#125; // å–ï¼Œè¯»ï¼Œæ‰€æœ‰äººéƒ½å¯ä»¥è¯»ï¼ public void get(String key)&#123; readWriteLock.readLock().lock(); try &#123; System.out.println(Thread.currentThread().getName()+&quot;è¯»å–&quot;+key); Object o = map.get(key); System.out.println(Thread.currentThread().getName()+&quot;è¯»å–OK&quot;); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; finally &#123; readWriteLock.readLock().unlock(); &#125; &#125;&#125;/** * è‡ªå®šä¹‰ç¼“å­˜ */class MyCache&#123; private volatile Map&lt;String,Object&gt; map = new HashMap&lt;&gt;(); // å­˜ï¼Œå†™ public void put(String key,Object value)&#123; System.out.println(Thread.currentThread().getName()+&quot;å†™å…¥&quot;+key); map.put(key,value); System.out.println(Thread.currentThread().getName()+&quot;å†™å…¥OK&quot;); &#125; // å–ï¼Œè¯» public void get(String key)&#123; System.out.println(Thread.currentThread().getName()+&quot;è¯»å–&quot;+key); Object o = map.get(key); System.out.println(Thread.currentThread().getName()+&quot;è¯»å–OK&quot;); &#125;&#125; 10. é˜»å¡é˜Ÿåˆ—BlockingQueue ä»€ä¹ˆæƒ…å†µä¸‹æˆ‘ä»¬ä¼šä½¿ç”¨ é˜»å¡é˜Ÿåˆ—ï¼šå¤šçº¿ç¨‹å¹¶å‘å¤„ç†ï¼Œçº¿ç¨‹æ±  å­¦ä¼šä½¿ç”¨é˜Ÿåˆ— æ·»åŠ ã€ç§»é™¤ å››ç»„API æ–¹å¼ æŠ›å‡ºå¼‚å¸¸ æœ‰è¿”å›å€¼ï¼Œä¸æŠ›å‡ºå¼‚å¸¸ é˜»å¡ ç­‰å¾… è¶…æ—¶ç­‰å¾… æ·»åŠ  add() offer() put() offer( , , ) ç§»é™¤ remove() poll() take() poll( , ) åˆ¤æ–­é˜Ÿåˆ—é¦– element() peek() - - æŠ›å‡ºå¼‚å¸¸ ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ é˜»å¡ ç­‰å¾… è¶…æ—¶ç­‰å¾… 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100package com.swpu.bq;import java.util.concurrent.ArrayBlockingQueue;import java.util.concurrent.TimeUnit;public class Test &#123; public static void main(String[] args) throws InterruptedException &#123; //test1(); //test2(); //test3(); test4(); &#125; /* æŠ›å‡ºå¼‚å¸¸ */ public static void test1() &#123; ArrayBlockingQueue blockingQueue = new ArrayBlockingQueue(3); System.out.println(blockingQueue.add(&quot;a&quot;)); System.out.println(blockingQueue.add(&quot;b&quot;)); System.out.println(blockingQueue.add(&quot;c&quot;)); //IllegalStateException: Queue full //System.out.println(blockingQueue.add(&quot;d&quot;)); System.out.println(blockingQueue.element());//æŸ¥çœ‹é˜Ÿé¦–å…ƒç´ æ˜¯è° System.out.println(blockingQueue.remove()); System.out.println(blockingQueue.remove()); System.out.println(blockingQueue.remove()); //NoSuchElementException //System.out.println(blockingQueue.remove()); &#125; /* æœ‰è¿”å›å€¼ï¼Œæ²¡æœ‰å¼‚å¸¸ */ public static void test2() &#123; ArrayBlockingQueue blockingQueue = new ArrayBlockingQueue&lt;&gt;(3); System.out.println(blockingQueue.offer(&quot;a&quot;)); System.out.println(blockingQueue.offer(&quot;b&quot;)); System.out.println(blockingQueue.offer(&quot;c&quot;)); //false ä¸æŠ›å‡ºå¼‚å¸¸ System.out.println(blockingQueue.offer(&quot;c&quot;)); System.out.println(blockingQueue.peek()); System.out.println(blockingQueue.poll()); System.out.println(blockingQueue.poll()); System.out.println(blockingQueue.poll()); //null System.out.println(blockingQueue.poll()); &#125; /* ç­‰å¾…ï¼Œé˜»å¡ï¼ˆä¸€ç›´é˜»å¡ï¼‰ */ public static void test3() throws InterruptedException &#123; ArrayBlockingQueue blockingQueue = new ArrayBlockingQueue(3); blockingQueue.put(&quot;a&quot;); blockingQueue.put(&quot;b&quot;); blockingQueue.put(&quot;c&quot;); //ä¸€ç›´é˜»å¡ //blockingQueue.put(&quot;d&quot;); System.out.println(blockingQueue.take()); System.out.println(blockingQueue.take()); System.out.println(blockingQueue.take()); //ç­‰å¾… //System.out.println(blockingQueue.take()); &#125; /* ç­‰å¾…ï¼Œé˜»å¡ï¼ˆç­‰å¾…è¶…æ—¶ï¼‰ */ public static void test4() throws InterruptedException &#123; ArrayBlockingQueue blockingQueue = new ArrayBlockingQueue(3); blockingQueue.offer(&quot;a&quot;); blockingQueue.offer(&quot;b&quot;); blockingQueue.offer(&quot;c&quot;); //ç­‰å¾…è¶…è¿‡ä¸¤ç§’é€€å‡º //blockingQueue.offer(&quot;d&quot;, 2, TimeUnit.SECONDS); System.out.println(blockingQueue.poll()); System.out.println(blockingQueue.poll()); System.out.println(blockingQueue.poll()); System.out.println(blockingQueue.poll(2, TimeUnit.SECONDS)); &#125;&#125; SynchronousQueue åŒæ­¥é˜Ÿåˆ— 12345678910111213141516171819202122232425262728293031323334353637383940package com.swpu.bq;import java.util.concurrent.BlockingQueue;import java.util.concurrent.SynchronousQueue;import java.util.concurrent.TimeUnit;/*åŒæ­¥é˜Ÿåˆ— */public class SynchronousQueueDemo &#123; public static void main(String[] args) &#123; BlockingQueue&lt;String&gt; blockingQueue = new SynchronousQueue&lt;&gt;(); new Thread(() -&gt; &#123; try &#123; System.out.println(Thread.currentThread().getName() + &quot; put 1&quot;); blockingQueue.put(&quot;1&quot;); System.out.println(Thread.currentThread().getName() + &quot; put 2&quot;); blockingQueue.put(&quot;2&quot;); System.out.println(Thread.currentThread().getName() + &quot; put 3&quot;); blockingQueue.put(&quot;3&quot;); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125;, &quot;T1&quot;).start(); new Thread(() -&gt; &#123; try &#123; TimeUnit.SECONDS.sleep(3); System.out.println(Thread.currentThread().getName() + &quot; &quot; + blockingQueue.take()); TimeUnit.SECONDS.sleep(3); System.out.println(Thread.currentThread().getName() + &quot; &quot; + blockingQueue.take()); TimeUnit.SECONDS.sleep(3); System.out.println(Thread.currentThread().getName() + &quot; &quot; + blockingQueue.take()); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125;, &quot;T2&quot;).start(); &#125;&#125; 11. çº¿ç¨‹æ± ï¼ˆé‡ç‚¹ï¼‰çº¿ç¨‹æ± ï¼šä¸‰å¤§æ–¹æ³•ï¼Œä¸ƒå¤§å‚æ•°ï¼Œ4ç§æ‹’ç»ç­–ç•¥ æ± åŒ–æŠ€æœ¯ ç¨‹åºçš„è¿è¡Œï¼Œæœ¬è´¨ï¼šå ç”¨ç³»ç»Ÿçš„èµ„æºï¼ä¼˜åŒ–èµ„æºçš„ä½¿ç”¨ï¼=&gt;æ± åŒ–æŠ€æœ¯ çº¿ç¨‹æ± ã€è¿æ¥æ± ã€å†…å­˜æ± ã€å¯¹è±¡æ±  åˆ›å»ºï¼Œé”€æ¯ï¼Œååˆ†æµªè´¹èµ„æº æ± åŒ–æŠ€æœ¯ï¼šå®ç°å‡†å¤‡å¥½ä¸€äº›èµ„æºï¼Œæœ‰äººè¦ç”¨ï¼Œå°±æ¥æˆ‘è¿™é‡Œæ‹¿ï¼Œç”¨å®Œä¹‹åè¿˜ç»™æˆ‘ã€‚ çº¿ç¨‹æ± çš„å¥½å¤„ï¼š é™ä½èµ„æºçš„æ¶ˆè€— æé«˜å“åº”çš„é€Ÿåº¦ æ–¹ä¾¿ç®¡ç† ==çº¿ç¨‹å¤ç”¨ï¼Œå¯ä»¥æ§åˆ¶æœ€å¤§å¹¶å‘æ•°ï¼Œç®¡ç†çº¿ç¨‹== çº¿ç¨‹æ± ï¼šä¸‰å¤§æ–¹æ³• 1234567891011121314151617181920212223242526package com.swpu.pool;import java.util.concurrent.ExecutorService;import java.util.concurrent.Executors;// Executors å·¥å…·ç±»ã€ä¸‰å¤§æ–¹æ³•// ä½¿ç”¨äº†çº¿ç¨‹æ± ä¹‹åï¼Œä½¿ç”¨çº¿ç¨‹æ± åˆ›å»ºçº¿ç¨‹public class Demo01 &#123; public static void main(String[] args) &#123; //ExecutorService threadPool = Executors.newSingleThreadExecutor();// å•ä¸ªçº¿ç¨‹ //ExecutorService threadPool = Executors.newFixedThreadPool(5); //åˆ›å»ºä¸€ä¸ªå›ºå®šçš„çº¿ç¨‹æ± çš„å¤§å° ExecutorService threadPool = Executors.newCachedThreadPool(); // å¯ä¼¸ç¼©çš„ï¼Œé‡å¼ºåˆ™å¼ºï¼Œé‡å¼±åˆ™å¼± try &#123; for (int i = 0; i &lt; 10; i++) &#123; threadPool.execute(() -&gt; &#123; System.out.println(Thread.currentThread().getName() + &quot; OK&quot;); &#125;); &#125; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; finally &#123; threadPool.shutdown(); &#125; &#125;&#125; ä¸ƒå¤§å‚æ•° 12. å››å¤§å‡½æ•°å¼æ¥å£lambdaè¡¨è¾¾å¼ï¼Œé“¾å¼ç¼–ç¨‹ï¼Œå‡½æ•°å¼æ¥å£ï¼ŒStreamæµå¼è®¡ç®— å‡½æ•°å¼æ¥å£ï¼šåªæœ‰ä¸€ä¸ªæ–¹æ³•çš„æ¥å£ Function å‡½æ•°å¼æ¥å£ 12345678910111213141516171819202122package com.swpu.function;import java.util.function.Function;/** * Function å‡½æ•°å‹æ¥å£ï¼Œæœ‰ä¸€ä¸ªè¾“å…¥å‚æ•°ï¼Œæœ‰ä¸€ä¸ªè¾“å‡º * åªè¦æ˜¯ å‡½æ•°å‹æ¥å£ å¯ä»¥ç”¨ lambdaè¡¨è¾¾å¼ç®€åŒ– */public class Demo01 &#123; public static void main(String[] args) &#123;// Function function = new Function&lt;String, String&gt;() &#123;// @Override// public String apply(String str) &#123;// return str;// &#125;// &#125;; Function function = (str) -&gt; &#123; return str; &#125;; System.out.println(function.apply(&quot;app&quot;)); &#125;&#125; 12345678910111213141516171819202122package com.swpu.function;import java.util.function.Predicate;/** * æ–­å®šå‹æ¥å£ï¼šæœ‰ä¸€ä¸ªè¾“å…¥å‚æ•°ã€‚è¿”å›å€¼åªèƒ½æ˜¯å¸ƒå°”å€¼ */public class Demo02 &#123; public static void main(String[] args) &#123;// Predicate&lt;String&gt; predicate = new Predicate&lt;String&gt;() &#123;// @Override// public boolean test(String s) &#123;// return s.isEmpty();// &#125;// &#125;; Predicate&lt;String&gt; predicate = (str)-&gt;&#123; return str.isEmpty(); &#125;; System.out.println(predicate.test(&quot;&quot;)); &#125;&#125; Consumer æ¶ˆè´¹æ€§æ¥å£ 123456789101112131415161718192021package com.swpu.function;import java.util.function.Consumer;/** * Consumer æ¶ˆè´¹å‹æ¥å£ï¼šåªæœ‰è¾“å…¥ï¼Œæ²¡æœ‰è¿”å›å€¼ */public class Demo03 &#123; public static void main(String[] args) &#123;// Consumer&lt;String&gt; consumer = new Consumer&lt;&gt;() &#123;// @Override// public void accept(String s) &#123;// System.out.println(s);// &#125;// &#125;; Consumer&lt;String&gt; consumer = (s) -&gt; &#123; System.out.println(s); &#125;; consumer.accept(&quot;app&quot;); &#125;&#125; Supplier ä¾›ç»™å‹æ¥å£ 12345678910111213141516171819202122package com.swpu.function;import java.util.function.Supplier;/** * Supplier ä¾›ç»™å‹æ¥å£ æ²¡æœ‰å‚æ•°ï¼Œåªæœ‰è¿”å›å€¼ */public class Demo04 &#123; public static void main(String[] args) &#123;// Supplier supplier = new Supplier&lt;Integer&gt;() &#123;// @Override// public Integer get() &#123;// System.out.println(&quot;get()&quot;);// return 1024;// &#125;// &#125;; Supplier supplier = () -&gt; &#123; return 1024; &#125;; System.out.println(supplier.get()); &#125;&#125; 13. Streamæµå¼è®¡ç®— ä»€ä¹ˆæ˜¯Streamæµå¼è®¡ç®— å¤§æ•°æ®ï¼šå­˜å‚¨åŠ è®¡ç®— é›†åˆï¼ŒMysql æœ¬è´¨å°±æ˜¯å­˜å‚¨ä¸œè¥¿çš„ è®¡ç®—éƒ½åº”è¯¥äº¤ç»™æµæ¥æ“ä½œ 1234567891011121314151617181920212223242526272829303132333435package com.swpu.stream;import java.util.Arrays;import java.util.List;/** * é¢˜ç›®è¦æ±‚ï¼šä¸€åˆ†é’Ÿå†…å®Œæˆæ­¤é¢˜ï¼Œåªèƒ½ç”¨ä¸€è¡Œä»£ç å®ç°ï¼ * ç°åœ¨æœ‰5ä¸ªç”¨æˆ·ï¼ç­›é€‰ï¼š * 1ã€ID å¿…é¡»æ˜¯å¶æ•° * 2ã€å¹´é¾„å¿…é¡»å¤§äº23å² * 3ã€ç”¨æˆ·åè½¬ä¸ºå¤§å†™å­—æ¯ * 4ã€ç”¨æˆ·åå­—æ¯å€’ç€æ’åº * 5ã€åªè¾“å‡ºä¸€ä¸ªç”¨æˆ·ï¼ */public class Test &#123; public static void main(String[] args) &#123; User u1 = new User(1,&quot;a&quot;,21); User u2 = new User(2,&quot;b&quot;,22); User u3 = new User(3,&quot;c&quot;,23); User u4 = new User(4,&quot;d&quot;,24); User u5 = new User(6,&quot;e&quot;,25); // é›†åˆå°±æ˜¯å­˜å‚¨ List&lt;User&gt; list = Arrays.asList(u1, u2, u3, u4, u5); // è®¡ç®—äº¤ç»™Streamæµ // lambdaè¡¨è¾¾å¼ã€é“¾å¼ç¼–ç¨‹ã€å‡½æ•°å¼æ¥å£ã€Streamæµå¼è®¡ç®— list.stream() .filter(u-&gt; u.getId()%2==0) .filter(u-&gt; u.getAge()&gt;23) .map(u-&gt; u.getName().toUpperCase()) .sorted((uu1,uu2)-&gt;&#123;return uu2.compareTo(uu1);&#125;) .limit(1) .forEach(System.out::println); &#125;&#125; 14. ForkJoin ä»€ä¹ˆæ˜¯ForkJoin ForkJoin åœ¨JDK1.7ï¼Œå¹¶æ‰§è¡Œä»»åŠ¡ï¼æé«˜æ•ˆç‡ï¼Œå¤§æ•°æ®é‡ å¤§æ•°æ®ï¼šMap Reduce(æŠŠå¤§ä»»åŠ¡æ‹†åˆ†ä¸ºå°ä»»åŠ¡) ForkJoin ç‰¹ç‚¹ï¼šå·¥ä½œçªƒå– è¿™ä¸ªé‡Œé¢ç»´æŠ¤çš„æ˜¯åŒç«¯é˜Ÿåˆ— 123456789101112131415161718192021222324252627282930313233343536373839404142434445package com.swpu.forkjoin;import java.util.concurrent.RecursiveTask;/** * æ±‚å’Œè®¡ç®—çš„ä»»åŠ¡ï¼ * 3000 6000ï¼ˆForkJoinï¼‰ 9000ï¼ˆStreamå¹¶è¡Œæµï¼‰ * // å¦‚ä½•ä½¿ç”¨ forkjoin * // 1ã€forkjoinPool é€šè¿‡å®ƒæ¥æ‰§è¡Œ * // 2ã€è®¡ç®—ä»»åŠ¡ forkjoinPool.execute(ForkJoinTask task) * // 3. è®¡ç®—ç±»è¦ç»§æ‰¿ ForkJoinTask */public class ForkJoinDemo extends RecursiveTask&lt;Long&gt; &#123; private Long start; // 1 private Long end; // 1990900000 // ä¸´ç•Œå€¼ private Long temp = 10000L; public ForkJoinDemo(Long start, Long end) &#123; this.start = start; this.end = end; &#125; // è®¡ç®—æ–¹æ³• @Override protected Long compute() &#123; if ((end - start) &lt; temp) &#123; Long sum = 0L; for (Long i = start; i &lt;= end; i++) &#123; sum += i; &#125; return sum; &#125; else &#123; // forkjoin é€’å½’ long middle = (start + end) / 2; // ä¸­é—´å€¼ ForkJoinDemo task1 = new ForkJoinDemo(start, middle); task1.fork(); // æ‹†åˆ†ä»»åŠ¡ï¼ŒæŠŠä»»åŠ¡å‹å…¥çº¿ç¨‹é˜Ÿåˆ— ForkJoinDemo task2 = new ForkJoinDemo(middle + 1, end); task2.fork(); // æ‹†åˆ†ä»»åŠ¡ï¼ŒæŠŠä»»åŠ¡å‹å…¥çº¿ç¨‹é˜Ÿåˆ— return task1.join() + task2.join(); &#125; &#125;&#125; 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051package com.swpu.forkjoin;import java.util.concurrent.ExecutionException;import java.util.concurrent.ForkJoinPool;import java.util.concurrent.ForkJoinTask;import java.util.stream.LongStream;/** * åŒä¸€ä¸ªä»»åŠ¡ï¼Œåˆ«äººæ•ˆç‡é«˜ä½ å‡ åå€ï¼ */public class Test &#123; public static void main(String[] args) throws ExecutionException, InterruptedException &#123; // test1(); // 12224 // test2(); // 10038 // test3(); // 153 &#125; // æ™®é€šç¨‹åºå‘˜ public static void test1()&#123; Long sum = 0L; long start = System.currentTimeMillis(); for (Long i = 1L; i &lt;= 10_0000_0000; i++) &#123; sum += i; &#125; long end = System.currentTimeMillis(); System.out.println(&quot;sum=&quot;+sum+&quot; æ—¶é—´ï¼š&quot;+(end-start)); &#125; // ä¼šä½¿ç”¨ForkJoin public static void test2() throws ExecutionException, InterruptedException &#123; long start = System.currentTimeMillis(); ForkJoinPool forkJoinPool = new ForkJoinPool(); ForkJoinTask&lt;Long&gt; task = new ForkJoinDemo(0L, 10_0000_0000L); ForkJoinTask&lt;Long&gt; submit = forkJoinPool.submit(task);// æäº¤ä»»åŠ¡ Long sum = submit.get(); long end = System.currentTimeMillis(); System.out.println(&quot;sum=&quot;+sum+&quot; æ—¶é—´ï¼š&quot;+(end-start)); &#125; public static void test3()&#123; long start = System.currentTimeMillis(); // Streamå¹¶è¡Œæµ () (] long sum = LongStream.rangeClosed(0L, 10_0000_0000L).parallel().reduce(0, Long::sum); long end = System.currentTimeMillis(); System.out.println(&quot;sum=&quot;+&quot;æ—¶é—´ï¼š&quot;+(end-start)); &#125;&#125; 15. å¼‚æ­¥å›è°ƒ1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950package com.swpu.future;import java.util.concurrent.CompletableFuture;import java.util.concurrent.ExecutionException;/** * å¼‚æ­¥è°ƒç”¨ï¼š CompletableFuture * // å¼‚æ­¥æ‰§è¡Œ * // æˆåŠŸå›è°ƒ * // å¤±è´¥å›è°ƒ */public class Demo01 &#123; public static void main(String[] args) throws ExecutionException, InterruptedException &#123; // æ²¡æœ‰è¿”å›å€¼çš„ runAsync å¼‚æ­¥å›è°ƒ// CompletableFuture&lt;Void&gt; completableFuture = CompletableFuture.runAsync(()-&gt;&#123;// try &#123;// TimeUnit.SECONDS.sleep(2);// &#125; catch (InterruptedException e) &#123;// e.printStackTrace();// &#125;// System.out.println(Thread.currentThread().getName()+&quot;runAsync=&gt;Void&quot;);// &#125;);//// System.out.println(&quot;1111&quot;);//// completableFuture.get(); // è·å–é˜»å¡æ‰§è¡Œç»“æœ // æœ‰è¿”å›å€¼çš„ supplyAsync å¼‚æ­¥å›è°ƒ // ajaxï¼ŒæˆåŠŸå’Œå¤±è´¥çš„å›è°ƒ // è¿”å›çš„æ˜¯é”™è¯¯ä¿¡æ¯ï¼› CompletableFuture&lt;Integer&gt; completableFuture = CompletableFuture.supplyAsync(()-&gt;&#123; System.out.println(Thread.currentThread().getName()+&quot;supplyAsync=&gt;Integer&quot;); int i = 10/0; return 1024; &#125;); System.out.println(completableFuture.whenComplete((t, u) -&gt; &#123; System.out.println(&quot;t=&gt;&quot; + t); // æ­£å¸¸çš„è¿”å›ç»“æœ System.out.println(&quot;u=&gt;&quot; + u); // é”™è¯¯ä¿¡æ¯ï¼šjava.util.concurrent.CompletionException: java.lang.ArithmeticException: / by zero &#125;).exceptionally((e) -&gt; &#123; System.out.println(e.getMessage()); return 233; // å¯ä»¥è·å–åˆ°é”™è¯¯çš„è¿”å›ç»“æœ &#125;).get()); /** * succee Code 200 * error Code 404 500 */ &#125;&#125; 16. JMM è¯·ä½ è°ˆè°ˆä½ å¯¹Volatile çš„ç†è§£ Volatile æ˜¯ Javaè™šæ‹Ÿæœºæä¾›çš„è½»é‡çº§çš„åŒæ­¥æœºåˆ¶ï¼Œ ä¿è¯å¯è§æ€§ ==ä¸ä¿è¯åŸå­æ€§== ç¦æ­¢æŒ‡ä»¤é‡æ’ ä»€ä¹ˆæ˜¯JMM JMMï¼šjavaå†…å­˜æ¨¡å‹ï¼Œä¸å­˜åœ¨çš„ä¸œè¥¿ã€‚çº¦å®šï¼Œæ¦‚å¿µ å…³äºJMMçš„ä¸€äº›åŒæ­¥çº¦å®š çº¿ç¨‹è§£é”å‰ï¼Œå¿…é¡»æŠŠå…±äº«å˜é‡==ç«‹åˆ»==åˆ·å›ä¸»å­˜ çº¿ç¨‹åŠ é”å‰ï¼Œå¿…é¡»è¯»å–ä¸»å­˜ä¸­çš„æœ€æ–°å€¼åˆ°å·¥ä½œå†…å­˜ä¸­ åŠ é”å’Œè§£é”æ˜¯åŒä¸€æŠŠé” 17. Volatile ä¿è¯å¯è§æ€§ 12345678910111213141516171819202122232425262728package com.swpu.tvolatile;import java.util.concurrent.TimeUnit;public class JMMDemo &#123; //ä¸åŠ volatileç¨‹åºå°±ä¼šæ­»å¾ªç¯ï¼ //åŠ volatileå¯ä»¥ä¿è¯å¯è§æ€§ private volatile static int num = 0; public static void main(String[] args) &#123; new Thread(() -&gt; &#123; while (num == 0) &#123; &#125; &#125;).start(); try &#123; TimeUnit.SECONDS.sleep(1); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; num = 1; System.out.println(num); &#125;&#125; 2.ä¸ä¿è¯åŸå­æ€§ åŸå­æ€§ï¼šä¸å¯åˆ†å‰² çº¿ç¨‹Aåœ¨æ‰§è¡Œä»»åŠ¡çš„æ—¶å€™ï¼Œä¸èƒ½è¢«æ‰“æ‰°çš„ï¼Œä¹Ÿä¸èƒ½è¢«åˆ†å‰²ï¼Œè¦ä¹ˆåŒæ—¶æˆåŠŸï¼Œè¦ä¹ˆåŒæ—¶å¤±è´¥ 1234567891011121314151617181920212223242526package com.swpu.tvolatile;public class VDemo02 &#123; //volatileä¸ä¿è¯åŸå­æ€§ private volatile static int num = 0; public static void add() &#123; num++; &#125; public static void main(String[] args) &#123; //ç†è®ºä¸Šnumç»“æœåº”è¯¥ä¸ºä¸¤ä¸‡ for (int i = 0; i &lt; 20; i++) &#123; new Thread(() -&gt; &#123; for (int i1 = 0; i1 &lt; 1000; i1++) &#123; add(); &#125; &#125;).start(); &#125; while (Thread.activeCount() &gt; 2) &#123; Thread.yield(); &#125; System.out.println(Thread.currentThread().getName() + &quot; &quot; + num); &#125;&#125; å¦‚æœä¸åŠ lockå’Œsynchronizedï¼Œæ€æ ·ä¿è¯åŸå­æ€§ ä½¿ç”¨åŸå­ç±»ï¼Œè§£å†³åŸå­æ€§é—®é¢˜ 123456789101112131415161718192021222324252627282930package com.swpu.tvolatile;import java.util.concurrent.atomic.AtomicInteger;public class VDemo02 &#123; //volatileä¸ä¿è¯åŸå­æ€§ private volatile static AtomicInteger num = new AtomicInteger(); public static void add() &#123; //num++; //ä¸æ˜¯ä¸€ä¸ªåŸå­æ€§æ“ä½œ num.getAndIncrement();//AtomInteger + 1 æ–¹æ³• ï¼Œ CAS &#125; public static void main(String[] args) &#123; //ç†è®ºä¸Šnumç»“æœåº”è¯¥ä¸ºä¸¤ä¸‡ for (int i = 0; i &lt; 20; i++) &#123; new Thread(() -&gt; &#123; for (int i1 = 0; i1 &lt; 1000; i1++) &#123; add(); &#125; &#125;).start(); &#125; while (Thread.activeCount() &gt; 2) &#123; Thread.yield(); &#125; System.out.println(Thread.currentThread().getName() + &quot; &quot; + num); &#125;&#125; è¿™äº›ç±»çš„åº•å±‚éƒ½ç›´æ¥å’Œæ“ä½œç³»ç»ŸæŒ‚é’©ï¼åœ¨å†…å­˜ä¸­ä¿®æ”¹å€¼ï¼Unsafeç±»æ˜¯ä¸€ä¸ªå¾ˆç‰¹æ®Šçš„å­˜åœ¨ï¼ æŒ‡ä»¤é‡æ’ ä»€ä¹ˆæ˜¯æŒ‡ä»¤é‡æ’ï¼šä½ å†™çš„ç¨‹åºï¼Œè®¡ç®—æœºå¹¶ä¸æ˜¯æŒ‰ç…§ä½ å†™çš„é‚£æ ·å»æ‰§è¡Œ æºä»£ç -&gt;ç¼–è¯‘å™¨ä¼˜åŒ–çš„é‡æ’-&gt;æ‰§è¡Œå¹¶è¡Œä¹Ÿå¯èƒ½ä¼šé‡æ’-&gt;æ‰§è¡Œ 1234int x = 1;//1int x = 2;//2x = x + 5;//3y = x * x;//4 volatileå¯ä»¥é¿å…æŒ‡ä»¤é‡æ’ï¼š å†…å­˜å±éšœã€CPUæŒ‡ä»¤ã€ä½œç”¨ï¼š ä¿è¯åˆ¶å®šçš„æ“ä½œæ‰§è¡Œé¡ºåº å¯ä»¥ä¿è¯æŸäº›å˜é‡çš„å†…å­˜å¯è§æ€§ï¼ˆåˆ©ç”¨è¿™äº›ç‰¹æ€§volatieå®ç°äº†å¯è§æ€§ï¼‰ Volatileæ˜¯å¯ä»¥ä¿æŒå¯è§æ€§ã€‚ä¸èƒ½ä¿è¯åŸå­æ€§ï¼Œç”±äºå†…å­˜å±éšœï¼Œå¯ä»¥ä¿è¯é¿å…æŒ‡ä»¤é‡æ’çš„ç°è±¡äº§ç”Ÿ 18. å½»åº•ç©è½¬å•ä¾‹æ¨¡å¼é¥¿æ±‰å¼ï¼ŒDCLæ‡’æ±‰å¼ï¼Œæ·±ç©¶ é¥¿æ±‰å¼ 123456789101112131415161718192021package com.swpu.single;public class Hungry &#123; //å¯èƒ½ä¼šæµªè´¹ç©ºé—´ private byte[] data1 = new byte[1024*1024]; private byte[] data2 = new byte[1024*1024]; private byte[] data3 = new byte[1024*1024]; private byte[] data4 = new byte[1024*1024]; private Hungry() &#123; &#125; private final static Hungry HUNGRY = new Hungry(); public static Hungry getInstance() &#123; return HUNGRY; &#125;&#125; DCLæ‡’æ±‰å¼ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566package com.swpu.single;import java.lang.reflect.Constructor;import java.lang.reflect.Field;// æ‡’æ±‰å¼å•ä¾‹// é“é«˜ä¸€å°ºï¼Œé­”é«˜ä¸€ä¸ˆï¼public class LazyMan &#123; private static boolean qinjiang = false; private LazyMan() &#123; synchronized (LazyMan.class) &#123; if (qinjiang == false) &#123; qinjiang = true; &#125; else &#123; throw new RuntimeException(&quot;ä¸è¦è¯•å›¾ä½¿ç”¨åå°„ç ´åå¼‚å¸¸&quot;); &#125; &#125; &#125; private volatile static LazyMan lazyMan; // åŒé‡æ£€æµ‹é”æ¨¡å¼çš„ æ‡’æ±‰å¼å•ä¾‹ DCLæ‡’æ±‰å¼ public static LazyMan getInstance() &#123; if (lazyMan == null) &#123; synchronized (LazyMan.class) &#123; if (lazyMan == null) &#123; lazyMan = new LazyMan(); // ä¸æ˜¯ä¸€ä¸ªåŸå­æ€§æ“ä½œ &#125; &#125; &#125; return lazyMan; &#125; // åå°„ï¼ public static void main(String[] args) throws Exception &#123;// LazyMan instance = LazyMan.getInstance(); Field qinjiang = LazyMan.class.getDeclaredField(&quot;qinjiang&quot;); qinjiang.setAccessible(true); Constructor&lt;LazyMan&gt; declaredConstructor = LazyMan.class.getDeclaredConstructor(null); declaredConstructor.setAccessible(true); LazyMan instance = declaredConstructor.newInstance(); qinjiang.set(instance, false); LazyMan instance2 = declaredConstructor.newInstance(); System.out.println(instance); System.out.println(instance2); &#125;&#125;/* 1. åˆ†é…å†…å­˜ç©ºé—´ 2ã€æ‰§è¡Œæ„é€ æ–¹æ³•ï¼Œåˆå§‹åŒ–å¯¹è±¡ 3ã€æŠŠè¿™ä¸ªå¯¹è±¡æŒ‡å‘è¿™ä¸ªç©ºé—´ &lt;p&gt; 123 132 A B // æ­¤æ—¶lazyManè¿˜æ²¡æœ‰å®Œæˆæ„é€  */ é™æ€å†…éƒ¨ç±» 12345678910111213141516package com.swpu.single;public class Holder &#123; private Holder() &#123; &#125; public static Holder getInstance() &#123; return InnerClass.HOLDER; &#125; public static class InnerClass &#123; private static final Holder HOLDER = new Holder(); &#125;&#125; 19. æ·±å…¥ç†è§£CAS ä»€ä¹ˆå¼CAS 123456789101112131415161718192021package com.swpu.cas;import java.util.concurrent.atomic.AtomicInteger;public class CASDemo &#123; // CAS compareAndSet : æ¯”è¾ƒå¹¶äº¤æ¢ï¼ public static void main(String[] args) &#123; AtomicInteger atomicInteger = new AtomicInteger(2020); // æœŸæœ›ã€æ›´æ–° // public final boolean compareAndSet(int expect, int update) // å¦‚æœæˆ‘æœŸæœ›çš„å€¼è¾¾åˆ°äº†ï¼Œé‚£ä¹ˆå°±æ›´æ–°ï¼Œå¦åˆ™ï¼Œå°±ä¸æ›´æ–°, CAS æ˜¯CPUçš„å¹¶å‘åŸè¯­ï¼ System.out.println(atomicInteger.compareAndSet(2020, 2021)); System.out.println(atomicInteger.get()); atomicInteger.getAndIncrement(); System.out.println(atomicInteger.compareAndSet(2020, 2021)); System.out.println(atomicInteger.get()); &#125;&#125; CAS ï¼š æ¯”è¾ƒå½“å‰å·¥ä½œå†…å­˜ä¸­çš„å€¼å’Œä¸»å†…å­˜ä¸­çš„å€¼ï¼Œå¦‚æœè¿™ä¸ªå€¼æ˜¯æœŸæœ›çš„ï¼Œé‚£ä¹ˆåˆ™æ‰§è¡Œæ“ä½œï¼å¦‚æœä¸æ˜¯å°± ä¸€ç›´å¾ªç¯ï¼ ç¼ºç‚¹ï¼š 1ã€ å¾ªç¯ä¼šè€—æ—¶ 2ã€ä¸€æ¬¡æ€§åªèƒ½ä¿è¯ä¸€ä¸ªå…±äº«å˜é‡çš„åŸå­æ€§ 3ã€ABAé—®é¢˜ CAS: ABAé—®é¢˜ï¼ˆç‹¸çŒ«æ¢å¤ªå­ï¼‰ 123456789101112131415161718192021package com.swpu.cas;import java.util.concurrent.atomic.AtomicInteger;public class CASDemo &#123; // CAS compareAndSet : æ¯”è¾ƒå¹¶äº¤æ¢ï¼ public static void main(String[] args) &#123; AtomicInteger atomicInteger = new AtomicInteger(2020); // æœŸæœ›ã€æ›´æ–° // public final boolean compareAndSet(int expect, int update) // å¦‚æœæˆ‘æœŸæœ›çš„å€¼è¾¾åˆ°äº†ï¼Œé‚£ä¹ˆå°±æ›´æ–°ï¼Œå¦åˆ™ï¼Œå°±ä¸æ›´æ–°, CAS æ˜¯CPUçš„å¹¶å‘åŸè¯­ï¼ // ============== æ£ä¹±çš„çº¿ç¨‹ ================== System.out.println(atomicInteger.compareAndSet(2020, 2021)); System.out.println(atomicInteger.get()); System.out.println(atomicInteger.compareAndSet(2021, 2020)); System.out.println(atomicInteger.get()); // ============== æœŸæœ›çš„çº¿ç¨‹ ================== System.out.println(atomicInteger.compareAndSet(2020, 6666)); System.out.println(atomicInteger.get()); &#125;&#125; 20. åŸå­å¼•ç”¨ è§£å†³ABAé—®é¢˜ï¼Œå¼•å…¥åŸå­å¼•ç”¨ï¼å¯¹åº”çš„æ€æƒ³ï¼šä¹è§‚é”ï¼ å¸¦ç‰ˆæœ¬å·çš„åŸå­æ“ä½œ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263package com.swpu.cas;import java.util.concurrent.TimeUnit;import java.util.concurrent.atomic.AtomicStampedReference;import java.util.concurrent.locks.Lock;import java.util.concurrent.locks.ReentrantLock;public class CASDemo &#123; //AtomicStampedReference æ³¨æ„ï¼Œå¦‚æœæ³›å‹æ˜¯ä¸€ä¸ªåŒ…è£…ç±»ï¼Œæ³¨æ„å¯¹è±¡çš„å¼•ç”¨é—®é¢˜ // æ­£å¸¸åœ¨ä¸šåŠ¡æ“ä½œï¼Œè¿™é‡Œé¢æ¯”è¾ƒçš„éƒ½æ˜¯ä¸€ä¸ªä¸ªå¯¹è±¡ static AtomicStampedReference&lt;Integer&gt; atomicStampedReference = new AtomicStampedReference&lt;&gt;(1, 1); // CAS compareAndSet : æ¯”è¾ƒå¹¶äº¤æ¢ï¼ public static void main(String[] args) &#123; new Thread(() -&gt; &#123; int stamp = atomicStampedReference.getStamp(); // è·å¾—ç‰ˆæœ¬å· System.out.println(&quot;a1=&gt;&quot; + stamp); try &#123; TimeUnit.SECONDS.sleep(1); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; Lock lock = new ReentrantLock(true); atomicStampedReference.compareAndSet(1, 2, atomicStampedReference.getStamp(), atomicStampedReference.getStamp() + 1); System.out.println(&quot;a2=&gt;&quot; + atomicStampedReference.getStamp()); System.out.println(atomicStampedReference.compareAndSet(2, 1, atomicStampedReference.getStamp(), atomicStampedReference.getStamp() + 1)); System.out.println(&quot;a3=&gt;&quot; + atomicStampedReference.getStamp()); &#125;, &quot;a&quot;).start(); // ä¹è§‚é”çš„åŸç†ç›¸åŒï¼ new Thread(() -&gt; &#123; int stamp = atomicStampedReference.getStamp(); // è·å¾—ç‰ˆæœ¬å· System.out.println(&quot;b1=&gt;&quot; + stamp); try &#123; TimeUnit.SECONDS.sleep(2); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println(atomicStampedReference.compareAndSet(1, 6, stamp, stamp + 1)); System.out.println(&quot;b2=&gt;&quot; + atomicStampedReference.getStamp()); &#125;, &quot;b&quot;).start(); &#125;&#125; æ³¨æ„ï¼š Integer ä½¿ç”¨äº†å¯¹è±¡ç¼“å­˜æœºåˆ¶ï¼Œé»˜è®¤èŒƒå›´æ˜¯ -128 ~ 127 ï¼Œæ¨èä½¿ç”¨é™æ€å·¥å‚æ–¹æ³• valueOf è·å–å¯¹è±¡å® ä¾‹ï¼Œè€Œä¸æ˜¯ newï¼Œå› ä¸º valueOf ä½¿ç”¨ç¼“å­˜ï¼Œè€Œ new ä¸€å®šä¼šåˆ›å»ºæ–°çš„å¯¹è±¡åˆ†é…æ–°çš„å†…å­˜ç©ºé—´ï¼› 21. å„ç§é”çš„ç†è§£1. å…¬å¹³é”ï¼Œéå…¬å¹³é”å…¬å¹³é”ï¼š éå¸¸å…¬å¹³ï¼Œ ä¸èƒ½å¤Ÿæ’é˜Ÿï¼Œå¿…é¡»å…ˆæ¥ååˆ°ï¼ éå…¬å¹³é”ï¼šéå¸¸ä¸å…¬å¹³ï¼Œå¯ä»¥æ’é˜Ÿ ï¼ˆé»˜è®¤éƒ½æ˜¯éå…¬å¹³ï¼‰ 2. å¯é‡å…¥é”å¯é‡å…¥é”ï¼ˆé€’å½’é”ï¼‰ Synchronized 123456789101112131415161718192021222324package com.swpu.lock;public class Demo01 &#123; public static void main(String[] args) &#123; Phone phone = new Phone(); new Thread(() -&gt; &#123; phone.sms(); &#125;, &quot;A&quot;).start(); new Thread(() -&gt; &#123; phone.sms(); &#125;, &quot;B&quot;).start(); &#125;&#125;class Phone &#123; public synchronized void sms() &#123; System.out.println(Thread.currentThread().getName() + &quot; sms&quot;); call(); &#125; public synchronized void call() &#123; System.out.println(Thread.currentThread().getName() + &quot; call&quot;); &#125;&#125; Locké” 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950package com.swpu.lock;import java.util.concurrent.locks.Lock;import java.util.concurrent.locks.ReentrantLock;public class Demo02 &#123; public static void main(String[] args) &#123; Phone2 phone = new Phone2(); new Thread(()-&gt;&#123; phone.sms(); &#125;,&quot;A&quot;).start(); new Thread(()-&gt;&#123; phone.sms(); &#125;,&quot;B&quot;).start(); &#125;&#125;class Phone2&#123; Lock lock = new ReentrantLock(); public void sms()&#123; lock.lock(); // ç»†èŠ‚é—®é¢˜ï¼šlock.lock(); lock.unlock(); // lock é”å¿…é¡»é…å¯¹ï¼Œå¦åˆ™å°±ä¼šæ­»åœ¨é‡Œé¢ lock.lock(); try &#123; System.out.println(Thread.currentThread().getName() + &quot;sms&quot;); call(); // è¿™é‡Œä¹Ÿæœ‰é” &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; finally &#123; lock.unlock(); lock.unlock(); &#125; &#125; public void call()&#123; lock.lock(); try &#123; System.out.println(Thread.currentThread().getName() + &quot;call&quot;); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; finally &#123; lock.unlock(); &#125; &#125;&#125; 3. è‡ªæ—‹é” 1234567891011121314151617181920212223242526272829303132package com.swpu.lock;import java.util.concurrent.atomic.AtomicReference;/** * è‡ªæ—‹é” */public class SpinlockDemo &#123; // int 0 // Thread null AtomicReference&lt;Thread&gt; atomicReference = new AtomicReference&lt;&gt;(); // åŠ é” public void myLock() &#123; Thread thread = Thread.currentThread(); System.out.println(Thread.currentThread().getName() + &quot;==&gt; mylock&quot;); // è‡ªæ—‹é” while (!atomicReference.compareAndSet(null, thread)) &#123; &#125; &#125; // è§£é” // åŠ é” public void myUnLock() &#123; Thread thread = Thread.currentThread(); System.out.println(Thread.currentThread().getName() + &quot;==&gt; myUnlock&quot;); atomicReference.compareAndSet(thread, null); &#125;&#125; 123456789101112131415161718192021222324252627282930313233343536373839404142package com.swpu.lock;import java.util.concurrent.TimeUnit;public class TestSpinLock &#123; public static void main(String[] args) throws InterruptedException &#123;// ReentrantLock reentrantLock = new ReentrantLock();// reentrantLock.lock();// reentrantLock.unlock(); //åº•å±‚ä½¿ç”¨çš„è‡ªæ—‹é”CAS SpinlockDemo lock = new SpinlockDemo(); new Thread(() -&gt; &#123; lock.myLock(); try &#123; TimeUnit.SECONDS.sleep(3); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; finally &#123; lock.myUnLock(); &#125; &#125;, &quot;T1&quot;).start(); TimeUnit.SECONDS.sleep(1); new Thread(() -&gt; &#123; lock.myLock(); try &#123; TimeUnit.SECONDS.sleep(3); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; finally &#123; lock.myUnLock(); &#125; &#125;, &quot;T2&quot;).start(); &#125;&#125; 4. æ­»é” æ­»é”æ˜¯ä»€ä¹ˆ 1234567891011121314151617181920212223242526272829303132333435363738394041package com.swpu.lock;import java.util.concurrent.TimeUnit;public class DeadLockDemo &#123; public static void main(String[] args) &#123; String lockA = &quot;lockA&quot;; String lockB = &quot;lockB&quot;; new Thread(new MyThread(lockA, lockB), &quot;T1&quot;).start(); new Thread(new MyThread(lockB, lockA), &quot;T2&quot;).start(); &#125;&#125;class MyThread implements Runnable &#123; private String lockA; private String lockB; public MyThread(String lockA, String lockB) &#123; this.lockA = lockA; this.lockB = lockB; &#125; @Override public void run() &#123; synchronized (lockA) &#123; System.out.println(Thread.currentThread().getName() + &quot;lock:&quot; + lockA + &quot;=&gt;get&quot; + lockB); try &#123; TimeUnit.SECONDS.sleep(2); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; synchronized (lockB) &#123; System.out.println(Thread.currentThread().getName() + &quot;lock:&quot; + lockB + &quot;=&gt;get&quot; + lockA); &#125; &#125; &#125;&#125; è§£å†³é—®é¢˜ ä½¿ç”¨ jps -l å®šä½è¿›ç¨‹å· ä½¿ç”¨ jstack è¿›ç¨‹å· æ‰¾åˆ°æ­»é”é—®é¢˜","categories":[],"tags":[{"name":"ç¬”è®°","slug":"ç¬”è®°","permalink":"https://lemon-fruit.github.io/tags/%E7%AC%94%E8%AE%B0/"}]},{"title":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","date":"2021-02-28T14:20:00.000Z","updated":"2021-04-08T12:13:04.681Z","comments":true,"path":"2021/02/28/è®¾è®¡æ¨¡å¼/","link":"","permalink":"https://lemon-fruit.github.io/2021/02/28/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"è®¾è®¡æ¨¡å¼è®¾è®¡æ¨¡å¼ åˆ›å»ºå‹æ¨¡å¼ å•ä¾‹æ¨¡å¼ï¼Œå·¥å‚æ¨¡å¼ï¼ŒæŠ½è±¡å·¥å‚æ¨¡å¼ï¼Œå»ºé€ è€…æ¨¡å¼ï¼ŒåŸå‹æ¨¡å¼ ç»“æ„å‹æ¨¡å¼ é€‚é…å™¨æ¨¡å¼ï¼Œæ¡¥æ¥æ¨¡å¼ï¼Œè£…é¥°æ¨¡å¼ï¼Œç»„åˆæ¨¡å¼ï¼Œå¤–è§‚æ¨¡å¼ï¼Œäº«å…ƒæ¨¡å¼ï¼Œä»£ç†æ¨¡å¼ è¡Œä¸ºå‹æ¨¡å¼ æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼Œå‘½ä»¤æ¨¡å¼ï¼Œè¿­ä»£å™¨æ¨¡å¼ï¼Œè§‚å¯Ÿè€…æ¨¡å¼ï¼Œä¸­ä»‹è€…æ¨¡å¼ï¼Œå¤‡å¿˜å½•æ¨¡å¼ï¼Œè§£é‡Šå™¨æ¨¡å¼ï¼ŒçŠ¶æ€æ¨¡å¼ï¼Œç­–ç•¥æ¨¡å¼ï¼ŒèŒè´£é“¾æ¨¡å¼ï¼Œè®¿é—®è€…æ¨¡å¼ OOPä¸ƒå¤§åŸåˆ™ å¼€é—­åŸåˆ™ : å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ é‡Œæ°æ›¿æ¢åŸåˆ™ : ç»§æ‰¿å¿…é¡»ç¡®ä¿è¶…ç±»æ‰€æ‹¥æœ‰çš„æ€§è´¨åœ¨å­ç±»ä¸­ä»ç„¶æˆç«‹ ä¾èµ–å€’ç½®åŸåˆ™ : è¦é¢å‘æ¥å£ç¼–ç¨‹ï¼Œä¸è¦é¢å‘å®ç°ç¼–ç¨‹ã€‚ å•ä¸€èŒè´£åŸåˆ™ : æ§åˆ¶ç±»çš„ç²’åº¦å¤§å°ã€å°†å¯¹è±¡è§£è€¦ã€æé«˜å…¶å†…èšæ€§ã€‚ æ¥å£éš”ç¦»åŸåˆ™ : è¦ä¸ºå„ä¸ªç±»å»ºç«‹å®ƒä»¬éœ€è¦çš„ä¸“ç”¨æ¥å£ è¿ªç±³ç‰¹æ³•åˆ™ : åªä¸ä½ çš„ç›´æ¥æœ‹å‹äº¤è°ˆï¼Œä¸è·Ÿâ€œé™Œç”Ÿäººâ€è¯´è¯ã€‚ åˆæˆå¤ç”¨åŸåˆ™ : å°½é‡å…ˆä½¿ç”¨ç»„åˆæˆ–è€…èšåˆç­‰å…³è”å…³ç³»æ¥å®ç°ï¼Œå…¶æ¬¡æ‰è€ƒè™‘ä½¿ç”¨ç»§æ‰¿å…³ç³»æ¥å®ç°ã€‚","categories":[],"tags":[{"name":"ç¬”è®°","slug":"ç¬”è®°","permalink":"https://lemon-fruit.github.io/tags/%E7%AC%94%E8%AE%B0/"}]},{"title":"Mysql","slug":"mysqlç¬”è®°","date":"2021-02-27T07:25:14.000Z","updated":"2021-04-08T12:25:42.034Z","comments":true,"path":"2021/02/27/mysqlç¬”è®°/","link":"","permalink":"https://lemon-fruit.github.io/2021/02/27/mysql%E7%AC%94%E8%AE%B0/","excerpt":"","text":"ä¸‰å¤§èŒƒå¼ ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰ åŸå­æ€§ï¼šä¿è¯æ¯ä¸€åˆ—ä¸å¯å†åˆ† ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰ å‰æï¼šæ»¡è¶³ç¬¬ä¸€èŒƒå¼ æ¯å¼ è¡¨åªæè¿°ä¸€ä»¶äº‹æƒ… ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰ å‰æï¼šæ»¡è¶³ç¬¬ä¸€èŒƒå¼å’Œç¬¬äºŒèŒƒå¼ ç¬¬ä¸‰èŒƒå¼éœ€è¦ç¡®ä¿æ•°æ®è¡¨ä¸­çš„æ¯ä¸€åˆ—æ•°æ®éƒ½å’Œä¸»é”®ç›´æ¥ç›¸å…³ï¼Œè€Œä¸èƒ½é—´æ¥ç›¸å…³ è§„èŒƒæ€§å’Œæ€§èƒ½çš„é—®é¢˜ å…³è”æŸ¥è¯¢çš„è¡¨ä¸å¾—è¶…è¿‡ä¸‰å¼ è¡¨ è€ƒè™‘å•†ä¸šåŒ–çš„éœ€æ±‚å’Œç›®æ ‡ï¼Œï¼ˆæˆæœ¬å’Œç”¨æˆ·ä½“éªŒï¼‰æ•°æ®åº“æ€§èƒ½ è§„èŒƒæ€§ å†—ä½™å­—æ®µ æ•°æ®åº“è¿æ¥æ± æ± åŒ–æŠ€æœ¯ï¼šå‡†å¤‡ä¸€äº›é¢„å…ˆçš„èµ„æºï¼Œè¿‡æ¥å°±è¿æ¥é¢„å…ˆå‡†å¤‡å¥½çš„ å¼€æºæ•°æ®æº DBCP C3P0 Druidï¼šé˜¿é‡Œ DBCP éœ€è¦ç”¨åˆ° jar åŒ… commons-dbcp-x.x ï¼Œcommons-pool-x.x C3P0 éœ€è¦ç”¨åˆ° jar åŒ… c3p0-x.x ï¼Œ mchange-commons-java-x.x Druid urlï¼šhttps://dbaplus.cn/news-155-1531-1.html å®¢æˆ·ç«¯/æœåŠ¡ç«¯é€šä¿¡åè®®MySQLå®¢æˆ·ç«¯/æœåŠ¡ç«¯é€šä¿¡åè®®æ˜¯â€œåŠåŒå·¥â€çš„ï¼šåœ¨ä»»ä¸€æ—¶åˆ»ï¼Œè¦ä¹ˆæ˜¯æœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€æ•°æ®ï¼Œè¦ä¹ˆæ˜¯å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€æ•°æ®ï¼Œè¿™ä¸¤ä¸ªåŠ¨ä½œä¸èƒ½åŒæ—¶å‘ç”Ÿã€‚ä¸€æ—¦ä¸€ç«¯å¼€å§‹å‘é€æ¶ˆæ¯ï¼Œå¦ä¸€ç«¯è¦æ¥æ”¶å®Œæ•´ä¸ªæ¶ˆæ¯æ‰èƒ½å“åº”å®ƒï¼Œæ‰€ä»¥æˆ‘ä»¬æ— æ³•ä¹Ÿæ— é¡»å°†ä¸€ä¸ªæ¶ˆæ¯åˆ‡æˆå°å—ç‹¬ç«‹å‘é€ï¼Œä¹Ÿæ²¡æœ‰åŠæ³•è¿›è¡Œæµé‡æ§åˆ¶ å½“æŸ¥è¯¢è¯­å¥å¾ˆé•¿çš„æ—¶å€™ï¼Œéœ€è¦è®¾ç½®max_allowed_packetå‚æ•° å°½é‡ä¿æŒæŸ¥è¯¢ç®€å•ä¸”åªè¿”å›å¿…éœ€çš„æ•°æ®ï¼Œå‡å°é€šä¿¡é—´æ•°æ®åŒ…çš„å¤§å°å’Œæ•°é‡ æŸ¥è¯¢ç¼“å­˜è§£æä¸€ä¸ªè¯­å¥å‰ï¼Œå¦‚æœç¼“å­˜æ˜¯å¼€å¯çš„ï¼Œé‚£ä¹ˆMysqlä¼šæ£€æŸ¥è¿™ä¸ªæŸ¥è¯¢è¯­å¥æ˜¯å¦å‘½ä¸­æŸ¥è¯¢ç¼“å­˜ä¸­çš„æ•°æ®ã€‚å¦‚æœæ°å¥½å‘½ä¸­æŸ¥è¯¢ç¼“å­˜ï¼Œåœ¨æ£€æŸ¥ä¸€æ¬¡ç”¨æˆ·æƒé™åç›´æ¥è¿”å›ç¼“å­˜ä¸­çš„ç»“æœã€‚æŸ¥è¯¢ä¸ä¼šè¢«è§£æï¼Œä¹Ÿä¸ä¼šç”Ÿæˆæ‰§è¡Œè®¡åˆ’ï¼Œæ›´ä¸ä¼šæ‰§è¡Œ å¦‚è¿‡æŸ¥è¯¢ä¸­åŒ…æ‹¬ ä»»ä½•ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°ã€å­˜å‚¨è¿‡ç¨‹ã€ç”¨æˆ·å˜é‡ã€ä¸´æ—¶è¡¨ï¼Œç³»ç»Ÿè¡¨ï¼Œä¸ä¼šç¼“å­˜ è®¾è®¡ä¸Šä¼˜åŒ– å¤šä¸ªå°è¡¨ä»£æ›¿ä¸€ä¸ªå¤§è¡¨ æ‰¹é‡æ’å…¥ä»£æ›¿å¾ªç¯å•æ¡æ’å…¥ åˆç†æ§åˆ¶ç¼“å­˜ç©ºé—´å¤§å° SQL_CACHE å’Œ SQL_NO_CACH ä¸è¦è½»æ˜“æ‰“å¼€æŸ¥è¯¢ç¼“å­˜ï¼Œç‰¹åˆ«æ˜¯å†™å¯†é›†å‹åº”ç”¨ã€‚å¦‚æœä½ å®åœ¨æ˜¯å¿ä¸ä½ï¼Œå¯ä»¥å°†query_cache_typeè®¾ç½®ä¸ºDEMANDï¼Œè¿™æ—¶åªæœ‰åŠ å…¥SQL_CACHEçš„æŸ¥è¯¢æ‰ä¼šèµ°ç¼“å­˜ï¼Œå…¶ä»–æŸ¥è¯¢åˆ™ä¸ä¼š B+ B- æ ‘ mysql ç´¢å¼• https://segmentfault.com/a/1190000004690721 B-æ ‘æœ‰å¦‚ä¸‹ç‰¹ç‚¹: æ‰€æœ‰é”®å€¼åˆ†å¸ƒåœ¨æ•´é¢—æ ‘ä¸­ï¼› ä»»ä½•ä¸€ä¸ªå…³é”®å­—å‡ºç°ä¸”åªå‡ºç°åœ¨ä¸€ä¸ªç»“ç‚¹ä¸­ï¼› æœç´¢æœ‰å¯èƒ½åœ¨éå¶å­ç»“ç‚¹ç»“æŸï¼› åœ¨å…³é”®å­—å…¨é›†å†…åšä¸€æ¬¡æŸ¥æ‰¾,æ€§èƒ½é€¼è¿‘äºŒåˆ†æŸ¥æ‰¾ï¼› 5. B+æ ‘æ˜¯B-æ ‘çš„å˜ä½“ï¼Œä¹Ÿæ˜¯ä¸€ç§å¤šè·¯æœç´¢æ ‘, å®ƒä¸ B- æ ‘çš„ä¸åŒä¹‹å¤„åœ¨äº: æ‰€æœ‰å…³é”®å­—å­˜å‚¨åœ¨å¶å­èŠ‚ç‚¹å‡ºç°,å†…éƒ¨èŠ‚ç‚¹(éå¶å­èŠ‚ç‚¹å¹¶ä¸å­˜å‚¨çœŸæ­£çš„ data) ä¸ºæ‰€æœ‰å¶å­ç»“ç‚¹å¢åŠ äº†ä¸€ä¸ªé“¾æŒ‡é’ˆ","categories":[],"tags":[{"name":"ç¬”è®°","slug":"ç¬”è®°","permalink":"https://lemon-fruit.github.io/tags/%E7%AC%94%E8%AE%B0/"}]},{"title":"hexoåšå®¢æ­å»ºæ„Ÿæƒ³","slug":"Hexoåšå®¢æ­å»ºæ„Ÿæƒ³","date":"2020-04-30T12:50:23.000Z","updated":"2021-04-08T12:21:09.788Z","comments":true,"path":"2020/04/30/Hexoåšå®¢æ­å»ºæ„Ÿæƒ³/","link":"","permalink":"https://lemon-fruit.github.io/2020/04/30/Hexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%84%9F%E6%83%B3/","excerpt":"ä¸€. æ­å»ºè¿‡ç¨‹","text":"ä¸€. æ­å»ºè¿‡ç¨‹ å› ä¸ºä»¥å‰å°è¯•è¿‡ioçš„æ­å»ºï¼Œæ‰€ä»¥åˆå§‹ç»‘å®šsshçš„æ­¥éª¤ï¼Œå°±è·³è¿‡äº†ã€‚ hexoçš„åˆå§‹åŒ– å…ˆä¸‹è½½hexoéƒ¨ç½²æ’ä»¶åœ¨è¿›è¡Œé…ç½®ï¼Œæ¯”å¦‚ä¿®æ”¹æ ¹ç›®å½•ä¸‹çš„config.yml æ–‡ä»¶çš„deployé…ç½® yiliaä¸»é¢˜çš„æ›¿æ¢å°†yiliaä¸»é¢˜cloneåˆ°æœ¬åœ°(æ–‡ä»¶ä½ç½®è‡ªè¡Œå†³å®šï¼Œå»ºè®®æ”¾åœ¨themeä¸»é¢˜ä¸‹) 1git clone http:&#x2F;&#x2F;github.com&#x2F;litten&#x2F;hexo-theme-yilia.git themes&#x2F;yilia ä¸‹è½½å®Œæˆåè¿›å…¥æ ¹ç›®å½•ä¸‹çš„config.yml æ–‡ä»¶æ‰¾åˆ° theme: xxx ä¿®æ”¹ä¸º theme: yilia ã€‚ äºŒ. é‡åˆ°çš„é—®é¢˜è¿æ°”è¾ƒå¥½ï¼Œæ²¡æœ‰é‡åˆ°å•¥å¤§é—®é¢˜ã€‚ æ­å»ºåšå®¢æ²¡æœ‰é‡åˆ°é—®é¢˜æ˜¯æ€ä¹ˆå›äº‹å‘¢ï¼Ÿæ­å»ºåšå®¢ç›¸ä¿¡å¤§å®¶éƒ½å¾ˆç†Ÿæ‚‰ï¼Œä½†æ˜¯æ­å»ºåšå®¢æ²¡æœ‰é‡åˆ°é—®é¢˜æ˜¯æ€ä¹ˆå›äº‹å‘¢ï¼Œä¸‹é¢å°±è®©å°ç¼–å¸¦å¤§å®¶ä¸€èµ·äº†è§£å§ã€‚ æ­å»ºåšå®¢æ²¡æœ‰é‡åˆ°é—®é¢˜ï¼Œå…¶å®å°±æ˜¯æ­å»ºåšå®¢æ²¡æœ‰é‡åˆ°é—®é¢˜ï¼Œå¤§å®¶å¯èƒ½ä¼šå¾ˆæƒŠè®¶æ­å»ºåšå®¢æ€ä¹ˆä¼šæ²¡æœ‰é‡åˆ°é—®é¢˜å‘¢ï¼Ÿä½†äº‹å®å°±æ˜¯è¿™æ ·ï¼Œå°ç¼–ä¹Ÿæ„Ÿåˆ°éå¸¸æƒŠè®¶ã€‚ è¿™å°±æ˜¯å…³äºæ­å»ºåšå®¢æ²¡æœ‰é‡åˆ°é—®é¢˜çš„äº‹æƒ…äº†ï¼Œå¤§å®¶æœ‰ä»€ä¹ˆæƒ³æ³•å‘¢ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºå‘Šè¯‰å°ç¼–ä¸€èµ·è®¨è®ºå“¦ï¼ åœ¨ä¸‹è½½live2dæ—¶ï¼Œnpmå‡ºç°è¿‡è­¦å‘Šï¼Œæœç´¢å‘ç°æ˜¯ï¼ŒæŸä¸ªæ–‡ä»¶å®šä¹‰é—®é¢˜ï¼Œé‚åˆ é™¤æ ¹ç›®å½•ä¸‹çš„sourceæ–‡ä»¶å¤¹ï¼Œé‡æ–°å®‰è£…è§£å†³ã€‚ ä¸‰. æ€»ç»“ æŒ‰ç…§è§†é¢‘çš„æ–¹æ³•å¯ä»¥æ¯”è¾ƒç®€å•çš„å®Œæˆè¯¥ä»»åŠ¡ã€‚ å­¦ä¼šäº†ä¸€äº›hexoçš„å¸¸ç”¨å‘½ä»¤ã€‚ äº†è§£äº†ä¸€ç‚¹ç‚¹ioçš„éƒ¨ç½²ï¼Œåˆ†æ”¯ç®¡ç†ã€‚","categories":[],"tags":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"https://lemon-fruit.github.io/tags/%E9%9A%8F%E7%AC%94/"}],"author":"Lemon"},{"title":"ç¬¬ä¸€ç¯‡åšå®¢","slug":"æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢","date":"2020-04-30T12:46:25.000Z","updated":"2021-04-08T12:28:09.250Z","comments":true,"path":"2020/04/30/æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢/","link":"","permalink":"https://lemon-fruit.github.io/2020/04/30/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2/","excerpt":"","text":"1. gitä»“åº“çš„æ­å»º 1git init æ­Œæ›²","categories":[],"tags":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"https://lemon-fruit.github.io/tags/%E9%9A%8F%E7%AC%94/"}]},{"title":"Mysqlå¿…çŸ¥å¿…ä¼š è¯»ä¹¦ç¬”è®°","slug":"mysqlå¿…çŸ¥å¿…ä¼š","date":"2020-01-31T08:42:25.000Z","updated":"2021-04-08T12:25:56.941Z","comments":true,"path":"2020/01/31/mysqlå¿…çŸ¥å¿…ä¼š/","link":"","permalink":"https://lemon-fruit.github.io/2020/01/31/mysql%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A/","excerpt":"","text":"1. ä½¿ç”¨MySQL1.1 è¿æ¥1mysql -u root -p 1.2 é€‰æ‹©æ•°æ®åº“1USE xxx 1.3 äº†è§£æ•°æ®åº“å’Œè¡¨ è¿”å›å¯ç”¨æ•°æ®åº“çš„ä¸€ä¸ªåˆ—è¡¨ 1SHOW DATABASES; è¿”å›å½“å‰é€‰æ‹©çš„æ•°æ®åº“å†…å¯ç”¨è¡¨çš„åˆ—è¡¨ 1SHOW TABLES 2. æ£€ç´¢æ•°æ®2.1 æ£€ç´¢å•ä¸ªåˆ— åˆ©ç”¨SELECTè¯­å¥ä»productsè¡¨ä¸­æ£€ç´¢ä¸€ä¸ªåä¸ºpros_nameçš„åˆ— 12SELECT prod_nameFROM products; 2.2 æ£€ç´¢å¤šä¸ªåˆ— å”¯ä¸€çš„ä¸åŒæ˜¯å¿…é¡»åœ¨SELECTå…³é”®å­—åç»™å‡ºå¤šä¸ªåˆ—åï¼Œåˆ—åä¹‹é—´å¿…é¡»ä»¥é€—å·åˆ†éš” 2.3 æ£€ç´¢æ‰€æœ‰åˆ— ä½¿ç”¨é€šé…ç¬¦ â€œ * â€œ 12SELECT *FROM products; 2.4 æ£€ç´¢ä¸åŒçš„è¡Œ ä½¿ç”¨DISTINCTå…³é”®è¯DISTINCTå…³é”®è¯å¿…é¡»æ”¾åœ¨åˆ—åå‰ 2.5 é™åˆ¶ç»“æœ ä¸ºäº†è¿”å›ç¬¬ä¸€è¡Œæˆ–å‰å‡ è¡Œï¼Œå¯ä½¿ç”¨LIMITå­å¥ 123SELECT *FROM productsLIMIT 5; LIMIT 5æŒ‡ç¤ºMySQLè¿”å›ä¸å¤šäº5è¡Œ ç¬¬ä¸€è¡Œä¸º 0 è¡Œ 2.6 ä½¿ç”¨å®Œå…¨é™å®šçš„è¡¨å ç±»ä¼¼ 12SELECT products.prod_nameFROM crashcourse.products; 3. æ’åºæ£€ç´¢æ•°æ®3.1 æ’åºæ£€ç´¢æ•°æ® ä»¥prod_nameåˆ—ä»¥å­—æ¯é¡ºåºæ’åº 123SELECT prod_nameFROM productsORDER BY prod_name; 3.2 æŒ‰å¤šä¸ªåˆ—æ’åº ä¸ºäº†æŒ‰å¤šä¸ªåˆ—æ’åºï¼Œåªè¦æŒ‡å®šåˆ—åï¼Œåˆ—åä¹‹é—´ç”¨é€—å·åˆ†å¼€å³å¯ 123SELECT prod_id, prod_price, prod_nameFROM productsORDER BY prod_price, prod_name; 3.3 æŒ‡å®šæ’åºæ–¹å‘ é™åºæ’åºå¿…é¡»æŒ‡å®šDESCå…³é”®è¯ 123SELECT prod_id, prod_price, prod_nameFROM productsORDER BY prod_price DESC; DESCå…³é”®è¯åªåº”ç”¨åˆ°ç›´æ¥ä½äºå…¶å‰é¢çš„åˆ—å ä½¿ç”¨DESCå’ŒLIMITçš„ç»„åˆï¼Œå¯ä»¥æ‰¾å‡ºä¸€ä¸ªåˆ—ä¸­çš„æœ€é«˜æœ€ä½å€¼ 4. è¿‡æ»¤æ•°æ®4.1 ä½¿ç”¨WHEREå­å¥123SELECT prod_name, prod_prizeFROM productsWHERE prod_price &#x3D; 2.50 4.2 WHEREå­å¥æ“ä½œç¬¦ æ“ä½œç¬¦ è¯´æ˜ = ç­‰äº &lt;&gt; ä¸ç­‰äº != ä¸ç­‰äº &lt; å°äº &lt;= å°äºç­‰äº &gt; å¤§äº &gt;= å¤§äºç­‰äº BETWEEN åœ¨æŒ‡å®šçš„ä¸¤ä¸ªå€¼ä¹‹é—´ 4.2.1 æ£€æŸ¥å•ä¸ªå€¼4.2.2 ä¸åŒ¹é…æ£€æŸ¥4.2.3 èŒƒå›´å€¼æ£€æŸ¥ ä½¿ç”¨BETWEEN xxx AND xxx 4.2.4 ç©ºå€¼æ£€æŸ¥ WHEREå¯è§è§æ£€æŸ¥ç©ºå€¼NULL 123......WHERE xx is NULL; 5. æ•°æ®è¿‡æ»¤5.1 ç»„åˆWHEREå­å¥ ä»¥ANDæˆ–OR 5.1.1 ANDæ“ä½œç¬¦å’ŒORæ“ä½œç¬¦ ä¼˜å…ˆå¤„ç†AND 5.2 INæ“ä½œç¬¦ INæ“ä½œç¬¦ç”¨æ¥æŒ‡å®šæ¡ä»¶èŒƒå›´ï¼ŒèŒƒå›´ä¸­çš„æ¯ä¸ªæ¡ä»¶éƒ½å¯ä»¥è¿›è¡ŒåŒ¹é…ã€‚ 1234SELECT prod_name, prod_priceFROM productsWHERE vend_id IN (1002,1003)ORDER BY prod_name; 5.3 NOTæ“ä½œç¬¦ WHEREå­å¥ä¸­çš„NOTæ“ä½œç¬¦æœ‰ä¸”åªæœ‰ä¸€ä¸ªåŠŸèƒ½ï¼Œé‚£å°±æ˜¯å¦å®šå®ƒä¹‹åæ‰€è·Ÿçš„ä»»ä½•æ¡ä»¶ã€‚ 1234SELECT prod_name, prod_priceFROM productsWHERE vend_id NOT IN (1002,1003)ORDER BY prod_name; 6. ç”¨é€šé…ç¬¦è¿›è¡Œè¿‡æ»¤6.1 LIKEæ“ä½œç¬¦6.1.1 ç™¾åˆ†å·ï¼ˆ%ï¼‰é€šé…ç¬¦ __%__è¡¨ç¤ºä»»ä½•å­—ç¬¦å‡ºç°ä»»ä½•å­—ç¬¦ä»»æ„æ¬¡æ•° 123SELECT prod_id, prod_nameFROM productsWHERE prod_name LIKE &#x27;jet%&#x27; \\\\æ£€ç´¢ä»»æ„ä»¥jetå¼€å¤´çš„è¯ 6.1.2 ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰é€šé…ç¬¦ ä¸‹åˆ’çº¿çš„ç”¨é€”å’Œ__%__ä¸€æ ·ï¼Œä½†ä¸‹åˆ’çº¿åªåŒ¹é…å•ä¸ªå­—ç¬¦ 6.2 ä½¿ç”¨é€šé…ç¬¦æŠ€å·§ ä¸è¦è¿‡åº¦ä½¿ç”¨é€šé…ç¬¦ é™¤éå¿…è¦ä¸è¦å°†å…¶æ”¾åœ¨æœç´¢æ¨¡å¼å¼€å¤´ 7. ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œæœç´¢7.1 ä½¿ç”¨MySQLæ­£åˆ™è¡¨è¾¾å¼7.1.1 åŸºæœ¬å­—ç¬¦åŒ¹é…1234SELECT pord_nameFROM productsWHERE prod_name REGEXP &#x27;1000&#x27;ORDER BY prod_name; 7.1.2 è¿›è¡ŒORåŒ¹é…1234SELECT prod_nameFROM productsWHERE prod_name REGEXP &#x27;1000|2000&#x27;ORDER BY prod_name; æœªç¼–è¾‘ï¼Œå¾…æ›´ï¼Œä¼°è®¡ä¹Ÿä¸ä¼šæ›´äº†8. åˆ›å»ºè®¡ç®—å­—æ®µ8.1 æ‹¼æ¥å­—æ®µ å¤šæ•°DBMSä½¿ç”¨ + æˆ– || æ¥å®ç°æ‹¼æ¥ï¼ŒMySQLåˆ™ä½¿ç”¨Concat()å‡½æ•°æ¥å®ç° 123SELECT Concat(vend_name, &#x27; (&#x27;, vend_country, &#x27;)&#x27;)FROM vendorsORDER BY vend_name; Trimå‡½æ•° MYSQLæ”¯æŒ**RTrim()ï¼ˆå»æ‰ä¸²å³è¾¹çš„ç©ºæ ¼ï¼‰ï¼ŒLTrim()ï¼ˆå»æ‰ä¸²å·¦è¾¹çš„ç©ºæ ¼ï¼‰ä»¥åŠTrim()**ï¼ˆå»æ‰ä¸²å·¦å³ä¸¤è¾¹çš„ç©ºæ ¼ï¼‰ ä½¿ç”¨åˆ«å123SELECT Concat(RTrim(vend_name), &#x27;(&#x27;, RTrim(vend_country),&#x27;)&#x27;) AS vend_titleFROM vendorsORDER BY vend_name; è¾“å‡ºï¼š 8.3 æ‰§è¡Œç®—æœ¯è®¡ç®—123SELECT quantity*item_prices AS expanded_priceFROM orderitemsWHERE order_num &#x3D; 20005; 9. ä½¿ç”¨æ•°æ®å¤„ç†å‡½æ•°9.1 ä½¿ç”¨å‡½æ•° å¤§å¤šæ•°SQLå®ç°æ”¯æŒä»¥ä¸‹ç±»å‹çš„å‡½æ•°ã€‚ ç”¨äºå¤„ç†æ–‡æœ¬ä¸²çš„æ–‡æœ¬å‡½æ•° ç”¨äºåœ¨æ•°æ®æ•°å€¼ä¸Šçš„ç®—æœ¯æ“ä½œ ç”¨äºå¤„ç†æ—¥æœŸå’Œæ—¶é—´å€¼å¹¶ä»è¿™äº›å€¼ä¸­æå–ç‰¹å®šæˆåˆ† è¿”å›DBMSæ­£ä½¿ç”¨çš„ç‰¹æ®Šä¿¡æ¯ 9.1.1 æ–‡æœ¬å¤„ç†å‡½æ•° ä¹‹å‰çš„RTrim() ä¸ºæ–‡æœ¬å‡½æ•°Upper() å‡½æ•°å°†æ–‡æœ¬è½¬æ¢ä¸ºå¤§å†™SOUNDEX() å°†ä»»ä½•æ–‡æœ¬ä¸²è½¬æ¢ä¸ºæè¿°å…¶è¯­éŸ³è¡¨ç¤ºçš„å­—æ¯æ•°å­—æ¨¡å¼çš„ç®—æ³• 1234SELECT cust_name, cust_contackFROM customersWHERE Soundex(cust_contack) = Soundex(&#x27;Y Lie&#x27;); //å¯èƒ½ä¼šåŒ¹é…åˆ°&#x27;Y LEE&#x27; 9.1.2 æ—¥æœŸå’Œæ—¶é—´å¤„ç†å‡½æ•° å‡½ æ•° è¯´ æ˜ AddDate() å¢åŠ ä¸€ä¸ªæ—¥æœŸï¼ˆå¤©ã€å‘¨ç­‰ï¼‰ AddTime() å¢åŠ ä¸€ä¸ªæ—¶é—´ï¼ˆæ—¶ã€åˆ†ç­‰ï¼‰ CurDate() è¿”å›å½“å‰æ—¥æœŸ CurTime() è¿”å›å½“å‰æ—¶é—´ Date() è¿”å›æ—¥æœŸæ—¶é—´çš„æ—¥æœŸéƒ¨åˆ† DateDiff() è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹å·® Date_Add() é«˜åº¦çµæ´»çš„æ—¥æœŸè¿ç®—å‡½æ•° Date_Format() è¿”å›ä¸€ä¸ªæ ¼å¼åŒ–çš„æ—¥æœŸæˆ–æ—¶é—´ä¸² Day() è¿”å›ä¸€ä¸ªæ—¥æœŸçš„å¤©æ•°éƒ¨åˆ† DayOfWeek() å¯¹äºä¸€ä¸ªæ—¥æœŸï¼Œè¿”å›å¯¹åº”çš„æ˜ŸæœŸå‡  Hour() è¿”å›ä¸€ä¸ªæ—¶é—´çš„å°æ—¶éƒ¨åˆ† Minute() è¿”å›ä¸€ä¸ªæ—¶é—´çš„åˆ†é’Ÿéƒ¨åˆ† Month() è¿”å›ä¸€ä¸ªæ—¥æœŸçš„æœˆä»½éƒ¨åˆ† Now() è¿”å›å½“å‰æ—¥æœŸå’Œæ—¶é—´ Second() è¿”å›ä¸€ä¸ªæ—¶é—´çš„ç§’éƒ¨åˆ† Time() è¿”å›ä¸€ä¸ªæ—¥æœŸæ—¶é—´çš„æ—¶é—´éƒ¨åˆ† Year() è¿”å›ä¸€ä¸ªæ—¥æœŸçš„å¹´ä»½éƒ¨åˆ† éœ€è¦æ³¨æ„çš„æ˜¯MySQLä½¿ç”¨çš„æ—¥æœŸæ ¼å¼ã€‚æ— è®ºä½ ä»€ä¹ˆæ—¶å€™æŒ‡å®šä¸€ä¸ªæ—¥æœŸï¼Œä¸ç®¡æ˜¯æ’å…¥æˆ–æ›´æ–°è¡¨å€¼è¿˜æ˜¯ç”¨WHEREå­å¥è¿›è¡Œè¿‡æ»¤ï¼Œæ—¥æœŸå¿…é¡»ä¸ºæ ¼å¼yyyy-mm-dd.//2020-02-01 ä½¿ç”¨WHERE order_date = 2005-09-01&#39;;ä¸å¯é ï¼Œå› ä¸ºå¯èƒ½å­˜åœ¨ï¼š2005-09-01 11:30:05,åˆ™è¯­å¥åŒ¹é…å¤±è´¥ è§£å†³æ–¹æ³•ï¼šWHERE Date(order_date) = &#39;2005-09-01&#39;; æŸ¥è¯¢æŸæœˆçš„å†…å®¹ 123x x xx x xWHERE Year(order_date) = 2005 AND Month(order_date) = 9; 9.1.3 æ•°å€¼å¤„ç†å‡½æ•°ä¸»è¦ç”¨äºä»£æ•°ã€ä¸‰è§’æˆ–å‡ ä½•è¿ç®—| å‡½ æ•° | è¯´ æ˜ || :â€”â€“ | :â€”â€”â€”â€”â€”â€“ || SAbs() | è¿”å›ä¸€ä¸ªæ•°çš„ç»å¯¹ || Cos() | è¿”å›ä¸€ä¸ªè§’åº¦çš„ä½™å¼¦ || Exp() | è¿”å›ä¸€ä¸ªæ•°çš„æŒ‡æ•°å€¼ || Mod() | è¿”å›é™¤æ“ä½œçš„ä½™æ•° || Pi() | è¿”å›åœ†å‘¨ç‡ || Rand() | è¿”å›ä¸€ä¸ªéšæœºæ•° || Sin() | è¿”å›ä¸€ä¸ªè§’åº¦çš„æ­£å¼¦ || Sqrt() | è¿”å›ä¸€ä¸ªæ•°çš„å¹³æ–¹æ ¹ || Tan() | è¿”å›ä¸€ä¸ªè§’åº¦çš„æ­£åˆ‡ | 10 æ±‡æ€»æ•°æ®10.1 èšé›†å‡½æ•° èšé›†å‡½æ•°è¿è¡Œåœ¨è¡Œç»„ä¸Šï¼Œè®¡ç®—å’Œè¿”å›å•ä¸ªå€¼çš„å‡½æ•° å‡½ æ•° è¯´ æ˜ AVG() è¿”å›æŸåˆ—çš„å¹³å‡å€¼ COUNT() è¿”å›æŸåˆ—çš„è¡Œæ•° MAX() è¿”å›æŸåˆ—çš„æœ€å¤§å€¼ MIN() è¿”å›æŸåˆ—çš„æœ€å°å€¼ SUM() è¿”å›æŸåˆ—å€¼ä¹‹å’Œ 10.1.1 AVG()å‡½æ•° åªç”¨äºå•ä¸ªåˆ—&emsp;AVG() åªèƒ½ç”¨æ¥ç¡®å®šç‰¹å®šæ•°å€¼åˆ—çš„å¹³å‡å€¼ï¼Œè€Œä¸”åˆ—åå¿…é¡»ä½œä¸ºå‡½æ•°å‚æ•°ç»™å‡ºAVG() å‡½æ•°å¿½ç•¥åˆ—å€¼ä¸ºNULLçš„è¡Œ 10.1.2 COUNT()å‡½æ•° COUNT() å‡½æ•°æœ‰ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼š ä½¿ç”¨COUNT(*) å¯¹è¡¨ä¸­è¡Œçš„æ•°ç›®è¿›è¡Œè®¡ç®—ï¼Œä¸ç®¡åˆ—è¡¨ä¸­åŒ…å«çš„æ˜¯ç©ºå€¼ï¼ˆNULLï¼‰è¿˜æ˜¯éç©ºå€¼ã€‚ ä½¿ç”¨COUNT(column) å¯¹ç‰¹å®šåˆ—ä¸­çš„å…·æœ‰å€¼çš„è¡Œè¿›è¡Œè®¡ç®—ï¼Œå¿½ç•¥NULLå€¼ã€‚(columnä¸ºå…·ä½“çš„åˆ—å) 10.1.3 MAX()å‡½æ•° MAX() è¿”å›æŒ‡å®šåˆ—ä¸­çš„æœ€å¤§å€¼ï¼ˆå¿½ç•¥å€¼ä¸ºNULLçš„è¡Œï¼‰ 10.1.4 MIN()å‡½æ•° ä¸MAX() åŠŸèƒ½ç›¸å 10.1.5 SUM()å‡½æ•° SUM() ç”¨æ¥è¿”å›æŒ‡å®šåˆ—å€¼çš„å’Œï¼ˆåŒæ ·å¿½ç•¥NULLçš„è¡Œï¼‰ 10.2 èšé›†ä¸åŒå€¼ æŒ‡å®šæ‰€æœ‰çš„è¡Œæ‰§è¡Œè®¡ç®—ï¼ŒæŒ‡å®šALLå‚æ•°æˆ–ä¸ç»™å‚æ•° åªåŒ…å«ä¸åŒçš„å€¼ï¼ŒæŒ‡å®šDISTINCTå‚æ•° 10.3 ç»„åˆèšé›†å‡½æ•° SELECTè¯­å¥å¯æ ¹æ®éœ€è¦åŒ…å«å¤šä¸ªèšé›†å‡½æ•° 11 åˆ†ç»„æ•°æ®11.1 æ•°æ®åˆ†ç»„ åˆ†ç»„å…è®¸æŠŠæ•°æ®åˆ†ä¸ºå¤šä¸ªé€»è¾‘ç»„ï¼Œä»¥ä¾¿èƒ½å¯¹æ¯ä¸ªç»„è¿›è¡Œèšé›†è®¡ç®— 11.2 åˆ›å»ºåˆ†ç»„123SELECT vend_id, COUNT(*) AS num_prodsFROM productsGROUP BY ven_id; ç»“æœï¼šæŒ‰vend_idæ’åºå¹¶åˆ†ç»„æ•°æ® GROUP BYå­å¥å¯ä»¥åŒ…å«ä»»æ„æ•°ç›®çš„åˆ—ã€‚è¿™ä½¿å¾—èƒ½å¯¹åˆ†ç»„è¿›è¡ŒåµŒå¥— å¦‚æœåœ¨ä½¿ç”¨GROUP BYå­å¥ä¸­åµŒå¥—äº†åˆ†ç»„ï¼Œæ•°æ®å°†åœ¨æœ€åè§„å®šçš„åˆ†ç»„ä¸Šè¿›è¡Œæ±‡æ€» GROUP BYå­å¥ä¸­åˆ—å‡ºçš„æ¯ä¸ªåˆ—éƒ½å¿…é¡»æ˜¯æ£€ç´¢åˆ—æˆ–æœ‰æ•ˆçš„è¡¨è¾¾å¼ï¼ˆä½†ä¸èƒ½æ˜¯èšé›†å‡½æ•°ï¼‰ã€‚å¦‚æœåœ¨SELECTä¸­ä½¿ç”¨è¡¨è¾¾å¼ï¼Œåˆ™å¿…é¡»åœ¨GROUP BYå­å¥ä¸­æŒ‡å®šç›¸åŒçš„è¡¨è¾¾å¼ã€‚ é™¤èšé›†è®¡ç®—è¯­å¥å¤–ï¼ŒSELECTè¯­å¥ä¸­çš„æ¯ä¸ªåˆ—éƒ½å¿…é¡»åœ¨GROUP BYå­å¥ä¸­ç»™å‡º å¦‚æœåˆ†ç»„åˆ—ä¸­å…·æœ‰NULLå€¼ï¼Œåˆ™NULLå°†ä½œä¸ºä¸€ä¸ªåˆ†ç»„è¿”å›ã€‚å¦‚æœåˆ—ä¸­æœ‰å¤šè¡ŒNULLå€¼ï¼Œå®ƒä»¬å°†åˆ†ä¸ºä¸€ç»„ã€‚ GROUP BYå­å¥å¿…é¡»å‡ºç°åœ¨WHEREå­å¥ä¹‹åï¼ŒORDER BYå­å¥ä¹‹å‰ 11.3 è¿‡æ»¤åˆ†ç»„ HAVING éå¸¸ç±»ä¼¼äºWHEREï¼Œç›®å‰æ‰€å­¦è¿‡çš„æ‰€æœ‰ç±»å‹çš„WHEREå­å¥éƒ½å¯ä»¥ç”¨HAVINGæ¥æ›¿ä»£ã€‚å”¯ä¸€çš„å·®åˆ«æ˜¯WHEREè¿‡æ»¤è¡Œï¼Œè€ŒHAVINGè¿‡æ»¤åˆ†ç»„ã€‚ 1234SELECT cust_id, COUNT(*) AS ordersFROM ordersGROUP BY cust_idHAVING COUNT(*) &gt;= 2; HAVINGå’ŒWHEREçš„å·®åˆ« WHEREåœ¨æ•°æ®åˆ†ç»„å‰è¿‡æ»¤ï¼ŒHAVINGåœ¨æ•°æ®åˆ†ç»„åè¿‡æ»¤ã€‚ï¼ï¼ï¼ 11.4 åˆ†ç»„å’Œæ’åº å–„ç”¨ORDER BY 123456SELECT order_num, SUM(quantity*item_price) AS ordertotalFROM orderitemsGROUP BY ordedr_numHAVING SUM(quantity*item_price) &gt;= 50ORDER BY ordertotal; 11.5 SELECTå­å¥é¡ºåº å­å¥ SELECT FROM WHERE GROUP BY HAVING ORDER BY LIMIT 12 ä½¿ç”¨å­æŸ¥è¯¢12.1 åˆ©ç”¨å­æŸ¥è¯¢è¿›è¡Œè¿‡æ»¤p125 å³åµŒå¥—æŸ¥è¯¢ åˆ—å¿…é¡»åŒ¹é… 12.2 ä½œä¸ºè®¡ç®—å­—æ®µä½¿ç”¨å­æŸ¥è¯¢ å¾…æ›´æ–° 13 è¿ç»“è¡¨13.1 è”ç»“ join 13.1.1 å…³ç³»è¡¨ å¤–é”® å¤–é”®ä¸ºæŸä¸€ä¸ªè¡¨ä¸­çš„ä¸€åˆ—ï¼Œå®ƒåŒ…å«å¦ä¸€ä¸ªè¡¨çš„ä¸»é”®å€¼ï¼Œå®šä¹‰äº†ä¸¤ä¸ªè¡¨ä¹‹é—´çš„å…³ç³»å¯ä¼¸ç¼©æ€§å¥½ 13.2 åˆ›å»ºè”ç»“ è§„å®šè¦è”ç»“çš„æ‰€æœ‰è¡¨åŠå®ƒä»¬å¦‚ä½•å…³è”å³å¯ 1234SELECT vend_name, prod_name, prod_priceFROM vendors, productsWHERE vendors.vend_id = products.vend_idORDER BY vend_name, prod_name; 13.2.1 WHEREå­å¥çš„é‡è¦æ€§ä¸è¦å¿˜äº†WHEREå­å¥ ç¬›å¡å°”ç§¯ ç”±æ²¡æœ‰è”ç»“æ¡ä»¶çš„è¡¨å…³ç³»è¿”å›çš„ç»“æœä¸ºç¬›å¡å°”ç§¯ã€‚æ£€ç´¢é™¤çš„è¡Œçš„æ•°ç›®å°†æ˜¯ä¸€ä¸ªè¡¨ä¸­çš„è¡Œæ•°ä¹˜ä»¥ç¬¬äºŒä¸ªè¡¨ä¸­çš„è¡Œæ•°ã€‚ 13.2.2 å†…éƒ¨è”ç»“ ç›®å‰æ‰€ç”¨çš„è”ç»“ç§°ä¸ºç­‰å€¼è”ç»“ï¼Œå®ƒåŸºäºä¸¤ä¸ªè¡¨ä¹‹é—´çš„ç›¸ç­‰æµ‹è¯•ã€‚è¿™ç§è”ç»“ä¹Ÿæˆä¸ºå†…éƒ¨è”ç»“ã€‚ 123SELECT vend_name,pord_name, pord_priceFORM vendors INNER JOIN productsON vendors.vend_id &#x3D; prouducts.vend_id; 13.2.3 è”ç»“å¤šä¸ªè¡¨123456SELECT prod_name, vend_name, prod_price, quantityFROM orderitems, products, vendorsWHERE products.vend_id = vendors.vend_idAND orderitems.prod_id = products.prod_idAND order_num = 20005; 14. åˆ›å»ºé«˜çº§è”ç»“14.1 ä½¿ç”¨è¡¨åˆ«å12345SELECT cust_name, cust_contactFROM customers AS c, orders AS o, orderitems AS oiWHERE c.cust_id = o.cust_id AND oi.order_num = o.oprder_numAND prod_id = &#x27;TNT2&#x27;; 16.2 ä½¿ç”¨ä¸åŒç±»å‹çš„è”ç»“16.2.1 è‡ªè”ç»“ ç¬¬ä¸€ç§å­æŸ¥è¯¢ 12345SELECT prod_id, prod_nameFROM productsWHERE vend_id &#x3D; (SELECT vend_id FROM products WHERE prod_id &#x3D; &#39;DTNTR&#39;); ç¬¬äºŒç§è”ç»“ 1234SELECT p1.prod_nameFROM products AS p1, products AS p2WHERE p1.vend_id &#x3D; p2.vend_id AND p2.prod_id &#x3D; &#39;DTNTR&#39;;","categories":[],"tags":[{"name":"ç¬”è®°","slug":"ç¬”è®°","permalink":"https://lemon-fruit.github.io/tags/%E7%AC%94%E8%AE%B0/"}]}],"categories":[],"tags":[{"name":"é¢ç»","slug":"é¢ç»","permalink":"https://lemon-fruit.github.io/tags/%E9%9D%A2%E7%BB%8F/"},{"name":"ç¬”è®°","slug":"ç¬”è®°","permalink":"https://lemon-fruit.github.io/tags/%E7%AC%94%E8%AE%B0/"},{"name":"éšç¬”","slug":"éšç¬”","permalink":"https://lemon-fruit.github.io/tags/%E9%9A%8F%E7%AC%94/"}]}